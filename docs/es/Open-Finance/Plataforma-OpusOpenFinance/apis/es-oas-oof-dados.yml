openapi: 3.0.3
info:
  title: Servicios de Consentimiento del módulo de BackOffice
  version: 1.0.0
security:
  - jwt: []
tags:
  - name: General
    description: Servicios de la plataforma Opus Open Finance
  - name: Consents
    description: Servicios de consentimiento
  - name: Payments
    description: Servicios de pagos
  - name: Enrollments
    description: Servicios de vinculación (de dispositivo - para Jornada Sin Redirección)
paths:
  /open-banking/oob-consents/v1/consents:
    get:
      tags:
        - General
      description: Recupera la lista de consentimientos
      parameters:
        - name: consentOwner
          in: query
          schema:
            type: string
            example: '[{"key":"cpf","value":"99999999999"},{"key":"cnpj","value":"11199999999999"}]'
        - name: cpf
          in: query
          schema:
            type: string
            example: "99999999999"
        - name: cnpj
          in: query
          schema:
            type: string
            example: "11199999999999"
        - name: createdOnBegin
          in: query
          schema:
            format: date-time
            type: string
            example: 2022-01-30T17:31:28Z
        - name: createdOnEnd
          in: query
          schema:
            format: date-time
            type: string
            example: 2022-01-30T17:31:28Z
        - name: consentTermPeriod
          description: Plazo total del consentimiento en meses (entero). Si es indeterminado, usar -1. No puede ser utilizado junto con los filtros createdOnBegin y/o createdOnEnd.
          in: query
          schema:
            format: integer
            type: string
            example: -1
        - name: modalityType
          description: Modalidad del pago. Uso exclusivo para type = PAYMENT
          in: query
          schema:
            $ref: "#/components/schemas/ModalityPaymentEnum"
        - name: modalityTypeList
          description: Lista de modalidades de consentimiento de pago separadas por coma. No puede ser utilizado junto con el filtro modalityType.
          in: query
          schema:
            type: string
            example: IMMEDIATE,SCHEDULED,VRP,SWEEPING,AUTOMATIC
        - name: orderType
          in: query
          schema:
            $ref: "#/components/schemas/OrderTypeEnum"
        - name: searchKey
          type: string
          in: query
        - name: status
          in: query
          schema:
            $ref: "#/components/schemas/ConsentAuthorizationStatusEnum"
        - name: statusList
          description: Lista de estados de consentimiento separados por coma. No puede ser utilizado junto con el filtro status.
          in: query
          schema:
            type: string
            example: AUTHORISED,AWAITING_AUTHORISATION,REJECTED,REVOKED,EXPIRED,CONSUMED,TIMEOUT_AUTHORISATION,TIMEOUT_PAYMENT,AWAITING_RISK_SIGNALS,AWAITING_ACCOUNT_HOLDER_VALIDATION,AWAITING_ENROLLMENT,PARTIALLY_ACCEPTED
        - name: type
          description: Retorna solo los consentimientos del tipo informado
          in: query
          schema:
            $ref: "#/components/schemas/ConsentTypesEnum"
        - name: typeList
          description: Lista de tipos de consentimiento separados por coma. No puede ser utilizado junto con el filtro type.
          in: query
          schema:
            type: string
            example: DATA_SHARING,PAYMENT,ENROLLMENT
        - name: paymentType
          in: query
          schema:
            $ref: "#/components/schemas/PaymentTypeEnum"
        - name: orgName
          description: Búsqueda por nombre de la organización. Ingresar al menos 3 caracteres.
          in: query
          schema:
            type: string
            example: opus
        - name: page
          in: query
          schema:
            format: int32
            default: 1
            type: integer
        - name: page-size
          in: query
          schema:
            format: int32
            default: 25
            type: integer
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseConsentSummaryPaginationSchema"
  /open-banking/oob-consents/v1/consents/{consentId}:
  get:
    tags:
      - General
    description: Recupera datos del consentimiento
    parameters:
      - name: consentId
        in: path
        required: true
        schema:
          $ref: "#/components/schemas/UUID"
      - name: X-Correlation-ID
        in: header
        schema:
          type: string
    responses:
      default:
        description: Respuesta de error predeterminada
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ErrorResponse"
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResponseConsentDetailSchema"
  patch:
    deprecated: true
    tags:
      - Consents
    description: Revoca consentimiento de pago
    parameters:
      - name: consentId
        in: path
        required: true
        schema:
          $ref: "#/components/schemas/UUID"
      - name: X-Correlation-ID
        in: header
        schema:
          type: string
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RequestRevokeOobPaymentConsent"
    responses:
      default:
        description: Respuesta de error predeterminada
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ErrorResponse"
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResponseConsentDetailSchema"
  /open-banking/oob-consents/consents/v1/consents/{consentId}:
    patch:
      tags:
        - Consents
      description: Revoca consentimiento de compartición de datos
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: paymentStatus
          in: header
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RevokeDataSharingConsentData"
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseConsentDetailSchema"
  /open-banking/oob-consents/v1/tpps/payment-legacy-ids:
    get:
      tags:
        - Payments
      description: Obtiene pagos del sistema legado dentro de un período
      parameters:
        - name: endDate
          in: query
          schema:
            type: string
            example: 2022-02-30
        - name: startDate
          in: query
          schema:
            type: string
            example: 2022-01-30
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseMapItpLegacyIds"
  /open-banking/oob-consents/v1/payment-status-notification:
    post:
      tags:
        - Payments
      description: Envía información sobre el cambio de estado de un pago
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RequestPaymentStatusChangeNotification"
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "204":
          description: Notificación recibida con éxito
  /open-banking/oob-consents/v1/payments/consents/{consentId}/authorisation:
    post:
      tags:
        - Payments
      description: Envía autorización de pago
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RequestPaymentConsentAuthorisation"
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "204":
          description: Notificación recibida con éxito
  /open-banking/oob-consents/v1/consents/{consentId}/extends:
    get:
      tags:
        - Consents
      description: Recupera lista extendida de consentimientos
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: page
          in: query
          schema:
            format: int32
            default: 1
            type: integer
        - name: page-size
          in: query
          schema:
            format: int32
            default: 25
            type: integer
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseConsentExtendsSchema"
    /open-banking/oob-consents/consents/v1/consents/{consentId}/search-key/{searchKey}:
    post:
      tags:
        - Consents
      description: Envía clave de búsqueda al consentimiento
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: searchKey
          in: path
          required: true
          schema:
            type: string
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Clave de búsqueda agregada con éxito
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
        - Consents
      description: Elimina clave de búsqueda del consentimiento
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: searchKey
          in: path
          required: true
          schema:
            type: string
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Clave de búsqueda eliminada con éxito
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /open-banking/oob-consents/consents/v1/consents/{consentId}/meta-data:
    put:
      tags:
        - Consents
      description: Inserta información de metadatos en el consentimiento
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MetadataData"
      responses:
        "204":
          description: Metadatos agregados con éxito
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    patch:
      tags:
        - Consents
      description: Actualiza información de metadatos en el consentimiento
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MetadataData"
      responses:
        "204":
          description: Metadatos actualizados con éxito
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
        - Consents
      description: Elimina información de metadatos del consentimiento
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Metadatos eliminados con éxito
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    get:
      tags:
        - Consents
      description: Obtiene información de metadatos del consentimiento
      parameters:
        - name: consentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "200":
          description: Información de metadatos obtenida con éxito
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetadataData"
  /open-banking/oob-consents/automatic-payments/v1/recurring-consents/{recurringConsentId}:
    patch:
      tags:
        - Consents Opus Open Banking
      description: Revoca consentimiento de pago automático
      parameters:
        - name: recurringConsentId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: X-Brand-ID
          in: header
          required: true
          schema:
            type: string
            nullable: false
        - name: X-Correlation-ID
          in: header
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AutomaticPaymentConsentEdition"
      responses:
        default:
          description: Respuesta de error predeterminada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseConsentDetailSchema"
  components:
  schemas:
    AccountPaymentTypeEnum:
      enum:
        - CACC
        - SLRY
        - SVGS
        - TRAN
      type: string
    ApiError:
      type: object
      properties:
        code:
          type: string
        title:
          type: string
        detail:
          type: string
        typeError:
          type: string
    Authorization:
      type: object
      properties:
        personDocumentNumber:
          type: string
        personName:
          type: string
        isRequirer:
          type: boolean
          example: true
        status:
          $ref: "#/components/schemas/ConsentAuthorizationStatusEnum"
    ConsentAuthorizationStatusEnum:
      enum:
        - AUTHORISED
        - AWAITING_AUTHORISATION
        - REJECTED
        - REVOKED
        - EXPIRED
        - CONSUMED
        - TIMEOUT_AUTHORISATION
        - TIMEOUT_PAYMENT
        - AWAITING_RISK_SIGNALS
        - AWAITING_ACCOUNT_HOLDER_VALIDATION
        - AWAITING_ENROLLMENT
        - PARTIALLY_ACCEPTED
      type: string
    ConsentDetail:
      type: object
      properties:
        brandId:
          type: string
          example: cbanco
        externalId:
          type: string
          example: urn:oob-bank:2f710909-4ccd-4998-8679-3d8de00e5ccf
        personDocumentType:
          type: string
          example: CPF
        personDocumentNumber:
          type: string
          example: "77721813700"
        businessDocumentType:
          type: string
          example: CNPJ
        businessDocumentNumber:
          type: string
          example: "33273542000197"
        createdOn:
          format: date-time
          type: string
          example: 2022-01-30T17:31:28Z
        expiredOn:
          format: date-time
          type: string
          example: 2022-01-30T17:41:28Z
        paymentData:
          $ref: "#/components/schemas/PaymentData"
        resources:
          type: array
          items:
            $ref: "#/components/schemas/Resource"
        authorizations:
          type: array
          items:
            $ref: "#/components/schemas/Authorization"
        permissions:
          type: array
          items:
            $ref: "#/components/schemas/Permission"
        consentHistoryStatus:
          type: array
          items:
            $ref: "#/components/schemas/ConsentHistoryStatus"
        modalityPayment:
          $ref: "#/components/schemas/ModalityPaymentEnum"
        revocation:
          $ref: "#/components/schemas/ConsentRevocation"
        rejection:
          $ref: "#/components/schemas/ConsentRejection"
        status:
          allOf:
            - $ref: "#/components/schemas/ConsentAuthorizationStatusEnum"
            - example: AUTHORISED
        type:
          allOf:
            - $ref: "#/components/schemas/ConsentTypesEnum"
            - example: PAYMENT
        paymentIds:
          type: array
          items:
            $ref: "#/components/schemas/ResourcePaymentId"
        orgName:
          type: string
          example: "Guia Seguros S.A."
        additionalInformation:
          description: Información adicional ingresada por el usuario pagador en los consentimientos de Pago Automático
          type: string
          example: "Mi recurrencia"
          pattern: '[\w\W\s]*'
          maxLength: 140
        tppName:
          type: string
          example: "Guia Seguros"
        enrollmentData:
          $ref: "#/components/schemas/EnrollmentData"
    ConsentHistoryStatus:
      type: object
      properties:
        consentStatus:
          $ref: "#/components/schemas/ConsentAuthorizationStatusEnum"
        authorizationStatus:
          $ref: "#/components/schemas/ConsentAuthorizationStatusEnum"
        authorizerName:
          type: string
        operatorUsername:
          type: string
        updatedOn:
          format: date-time
          type: string
          example: 2022-01-30T17:31:28Z
    ConsentSummary:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        type:
          $ref: "#/components/schemas/ConsentTypesEnum"
        paymentType:
          $ref: "#/components/schemas/PaymentTypeEnum"
        status:
          $ref: "#/components/schemas/ConsentAuthorizationStatusEnum"
        createdOn:
          format: date-time
          type: string
        expiresOn:
          format: date-time
          type: string
        brandId:
          type: string
          example: BANCO
        modalityPayment:
          $ref: "#/components/schemas/ModalityPaymentEnum"
        creditorName:
          type: string
          example: Marco Antonio de Brito
        amount:
          deprecated: true
          type: string
          example: "22.00"
        scheduleDate:
          type: string
          deprecated: true
          example: 2022-07-06
        orgName:
          type: string
          example: "Guia Seguros S.A."
        tppName:
          type: string
          example: "Guia Seguros"
        tppLogo:
          type: string
          example: "http://www.exemplo.com/logo.png"
    ConsentExtends:
      type: object
      properties:
        expirationDateTime:
          format: date-time
          type: string
        loggedUser:
          $ref: "#/components/schemas/LoggedUser"
        requestDateTime:
          format: date-time
          type: string
    ConsentTypesEnum:
      enum:
        - DATA_SHARING
        - PAYMENT
        - ENROLLMENT
      type: string
    Creditor:
      required:
        - personType
        - cpfCnpj
        - name
      type: object
      properties:
        personType:
          allOf:
            - $ref: "#/components/schemas/PaymentPersonTypeEnum"
            - nullable: false
        cpfCnpj:
          type: string
          example: "99999999999999"
          nullable: false
        name:
          maxLength: 140
          minLength: 1
          type: string
          example: Marco Antonio de Brito
          nullable: false
    CreditorAccount:
      required:
        - ispb
        - number
        - accountType
      type: object
      properties:
        ispb:
          type: string
          example: "12345678"
          nullable: false
        issuer:
          type: string
          example: "1774"
        number:
          type: string
          example: "1234567890"
          nullable: false
        accountType:
          allOf:
            - $ref: "#/components/schemas/AccountPaymentTypeEnum"
            - nullable: false
    DebtorAccount:
      required:
        - ispb
        - issuer
        - number
        - accountType
      type: object
      properties:
        ispb:
          type: string
          example: "12345678"
          nullable: false
        issuer:
          type: string
          example: "1774"
        number:
          type: string
          example: "1234567890"
          nullable: false
        accountType:
          allOf:
            - $ref: "#/components/schemas/AccountPaymentTypeEnum"
            - nullable: false
        ibgeTownCode:
          type: string
          minLength: 7
          maxLength: 7
          pattern: '^\d{7}$'
          example: "5300108"
    Creditors:
      type: array
      minItems: 1
      items:
        type: object
        description: Objeto que contiene los datos del receptor (creditor).
        required:
          - personType
          - cpfCnpj
          - name
        properties:
          personType:
            $ref: "#/components/schemas/EnumPaymentPersonType"
          cpfCnpj:
            type: string
            minLength: 11
            maxLength: 14
            pattern: '^\d{11}$|^\d{14}$'
            example: "58764789000137"
            description: |
              Identificación de la persona involucrada en la transacción.  
              Llenar con el CPF o CNPJ, de acuerdo con el valor elegido en el campo type.  
              El CPF debe ser informado con 11 dígitos, sin puntos ni guiones.  
              El CNPJ debe ser informado con 14 dígitos, sin puntos ni guiones.
          name:
            type: string
            pattern: ^([A-Za-zÀ-ÖØ-öø-ÿ,.@:&*+_<>()!?/\\$%\d' -]+)$
            maxLength: 120
            example: Marco Antonio de Brito
            description: |
              En el caso de persona natural, debe informarse el nombre completo del titular de la cuenta del receptor.  
              En el caso de persona jurídica, debe informarse la razón social o el nombre comercial del receptor.

    EnumPaymentPersonType:
      type: string
      enum:
        - PESSOA_NATURAL
        - PESSOA_JURIDICA
      example: PESSOA_NATURAL
      description: |
        Titular, persona natural o jurídica a quien se refieren los datos del receptor (creditor).

    ErrorResponse:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ApiError"
        meta:
          $ref: "#/components/schemas/Meta"
    KeyValueObject:
      type: object
      properties:
        key:
          type: string
        value:
          type: string
    Links:
      type: object
      properties:
        self:
          type: string
          example: https://api.banco.com.br/open-banking/api/v1/resource
        first:
          type: string
          example: https://api.banco.com.br/open-banking/api/v1/resource
        prev:
          type: string
          example: https://api.banco.com.br/open-banking/api/v1/resource
        next:
          type: string
          example: https://api.banco.com.br/open-banking/api/v1/resource
        last:
          type: string
          example: https://api.banco.com.br/open-banking/api/v1/resource
    LocalInstrumentEnum:
      enum:
        - MANU
        - DICT
        - QRDN
        - QRES
        - INIC
      type: string
    LoggedUser:
      required:
        - document
      type: object
      properties:
        document:
          allOf:
            - $ref: "#/components/schemas/LoggedUserDocument"
            - nullable: false
    LoggedUserDocument:
      required:
        - identification
        - rel
      type: object
      properties:
        identification:
          type: string
          example: "99999999999"
          nullable: false
        rel:
          type: string
          example: CPF
          nullable: false
    Meta:
      type: object
      properties:
        totalRecords:
          format: int32
          type: integer
          example: 2
        totalPages:
          format: int32
          type: integer
          example: 1
        requestDateTime:
          format: date-time
          type: string
    ModalityPaymentEnum:
      enum:
        - IMMEDIATE
        - SCHEDULED
        - SWEEPING
      type: string
    OrderTypeEnum:
      description: Enum de ordenación de la lista de consentimientos. ASC → orden creciente por fecha de creación; DESC → orden decreciente por fecha de creación; OPF → ordenación open finance (activos, pendientes, vencidos y cerrados)
      enum:
        - ASC
        - DESC
        - OPF
      type: string
    ResponsePaymentsDetailSchema:
      type: object
      properties:
        data:
          description: Respuesta de ejecución del servicio
          type: array
          items:
            allOf:
              - $ref: "#/components/schemas/ResponseRecurringPaymentsDataRead"
        links:
          allOf:
            - $ref: "#/components/schemas/Links"
            - description: Enlaces del servicio
        meta:
          allOf:
            - $ref: "#/components/schemas/Meta"
            - description: Información de los registros

    ResponseRecurringPaymentsDataRead:
      type: object
      properties:
        legacyIds:
          type: array
          items:
            $ref: "#/components/schemas/KeyValueObject"
        paymentId:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[a-zA-Z0-9][a-zA-Z0-9\-]{0,99}$'
          example: TXpRMU9UQTROMWhZV2xSU1FUazJSMDl
          description: |
            Código o identificador único informado por la institución detentora de la cuenta para representar la iniciación de pago.  
            El `recurringPaymentId` debe ser diferente del `endToEndId`.  
            Este es el identificador que deberá utilizarse para la consulta del estado de la iniciación de pago realizada.
        consentId:
          type: string
          maxLength: 256
          pattern: '^urn:[a-zA-Z0-9][a-zA-Z0-9\-]{0,31}:[a-zA-Z0-9()+,\-.:=@;$_!*''%\/?#]+$'
          example: "urn:bancoex:C1DD33123"
          description: |
            Identificador único del consentimiento creado para la iniciación de pago solicitada.  
            Debe ser un URN — Uniform Resource Name.

            Un URN, conforme definido en la [RFC8141], es un identificador de recurso persistente e independiente de localización.

            Considerando la cadena `urn:bancoex:C1DD33123` como ejemplo de `recurringConsentId`, tenemos:
            - el namespace (urn)  
            - el identificador asociado al namespace de la institución transmisora (bancoex)  
            - el identificador específico dentro del namespace (C1DD33123)

            [Restricción] Campo obligatorio cuando `authorisationFlow = FIDO_FLOW`.
        endToEndId:
          $ref: "#/components/schemas/EndToEndId"
        date:
          type: string
          maxLength: 10
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
          example: "2023-10-10"
          description: Fecha en que se realizará el pago.
        creationDateTime:
          type: string
          format: date-time
          maxLength: 20
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$'
          example: "2020-07-21T08:30:00Z"
          description: |
            Fecha y hora en que el pago fue creado.  
            Debe seguir el estándar RFC-3339 utilizando siempre el huso horario UTC.
        statusUpdateDateTime:
          type: string
          format: date-time
          maxLength: 20
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$'
          example: "2020-07-21T08:30:00Z"
          description: |
            Fecha y hora en que el pago tuvo su estado actualizado.  
            También sigue la RFC-3339, con timezone UTC.
        ibgeTownCode:
          type: string
          minLength: 7
          maxLength: 7
          pattern: '^\d{7}$'
          example: "5300108"
          description: |
            El campo ibgeTownCode en el arreglo Pix tiene el mismo comportamiento que el campo `codMun` descrito en el manual del Pix.

            1. Si no se envía la información referente al municipio, se asume que no existen feriados municipales o estatales en el período en cuestión.
        status:
          $ref: "#/components/schemas/EnumPaymentStatusType"
        localInstrument:
          allOf:
            - $ref: "#/components/schemas/LocalInstrumentEnum"
            - nullable: false
        rejectionReason:
          $ref: "#/components/schemas/RejectionReason"
        cnpjInitiator:
          type: string
          pattern: '^\d{14}$'
          maxLength: 14
          example: "50685362000135"
          description: CNPJ del Iniciador de Pago habilitado para la Iniciación en Pix.
        payment:
          $ref: "#/components/schemas/PaymentPix"
        remittanceInformation:
          type: string
          maxLength: 140
          pattern: '[\w\W\s]*'
          example: Pagamento da nota RSTO035-002.
          description: |
            Texto ingresado por el pagador como información adicional para el receptor.
        creditorAccount:
          $ref: "#/components/schemas/CreditorAccount"
        debtorAccount:
          $ref: "#/components/schemas/DebtorAccount"
        cancellation:
          $ref: "#/components/schemas/PixPaymentCancellation"
        authorisationFlow:
          type: string
          enum:
            - HYBRID_FLOW
            - CIBA_FLOW
            - FIDO_FLOW
          example: HYBRID_FLOW
          description: |
            Campo condicional que identifica el flujo de autorización utilizado.

            [Restricción] Si es CIBA o FIDO, el campo se vuelve obligatorio.  
            Si no está presente, se asume HYBRID_FLOW.
        transactionIdentification:
          type: string
          pattern: ^[a-zA-Z0-9]{1,35}$
          maxLength: 35
          example: "E00038166201907261559y6j6"
          description: |
            Identificador de la transacción que debe ser retransmitido intacto por el PSP del pagador.  
            Permite correlacionar la transferencia recibida con la instrucción enviada al usuario.
        document:
          type: object
          description: Información del documento identificador.
          required:
            - identification
            - rel
          properties:
            identification:
              type: string
              pattern: ^(?:\d{11}|\d{14})$
              minLength: 11
              maxLength: 14
              example: "11111111111111"
              description: Número del documento del titular, persona natural o jurídica.
            rel:
              type: string
              enum:
                - CPF
                - CNPJ
              example: "CNPJ"
              description: Tipo del documento del titular.
    EndToEndId:
      type: string
      minLength: 32
      maxLength: 32
      pattern: "^([E])([0-9]{8})([0-9]{4})(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])(2[0-3]|[01][0-9])([0-5][0-9])([a-zA-Z0-9]{11})$"
      example: E9040088820210128000800123873170
      description: |
        Se trata de un identificador único generado por la institución iniciadora de pagos y recibido por la institución detentora de la cuenta, recorriendo toda la jornada del pago Pix.

        [Restricción] La detentora debe obligatoriamente devolver el campo con el mismo valor recibido de la iniciadora.
    PaymentPix:
      type: object
      description: Objeto que contiene la información del pago.
      required:
        - amount
        - currency
      properties:
        amount:
          type: string
          minLength: 4
          maxLength: 19
          pattern: '^((\d{1,16}\.\d{2}))$'
          example: "100000.12"
          description: |
            Valor de la transacción con 2 decimales.
        currency:
          type: string
          maxLength: 3
          pattern: "^([A-Z]{3})$"
          example: BRL
          description: |
            Código de la moneda nacional según el modelo ISO-4217, es decir, 'BRL'. Todos los valores monetarios informados están representados con la moneda vigente de Brasil.
    EnumPaymentStatusType:
      type: string
      enum:
        - RCVD
        - CANC
        - ACCP
        - ACPD
        - RJCT
        - ACSC
        - PDNG
        - SCHD
      example: PDNG
      description: |
        Estado actual del pago. El estado evoluciona en el siguiente orden:
        - RCVD (Received) - Indica que la solicitud de pago fue recibida con éxito por la detentora, pero aún existen validaciones pendientes antes de ser enviada a liquidación.
        - CANC (Cancelled) - Indica que la transacción Pix pendiente fue cancelada con éxito por el usuario antes de ser confirmada (ACCP) o rechazada (RJCT) por la detentora.
        - ACCP (Accepted Customer Profile) - Indica que todas las verificaciones necesarias ya fueron realizadas por la detentora y que la transacción está lista para ser enviada a liquidación (al SPI si es Pix para otra institución o internamente si es para otra cuenta en la misma institución).
        - ACPD (Accepted Clearing Processed) - Indica que la detentora ya sometió la transacción para liquidación, pero aún no tiene la confirmación de si fue liquidada o rechazada.
        - RJCT (Rejected) - Indica que la transacción fue rechazada por la detentora o por el SPI.
        - ACSC (Accepted Settlement Completed Debitor Account) - Indica que la transacción fue efectivada por la detentora o por el SPI.
        - PDNG (Pending) - Indica que la detentora retuvo temporalmente la transacción Pix para análisis.
        - SCHD (Scheduled) - Indica que la transacción Pix fue programada con éxito en la detentora.  
        En caso de fallo:
        - RJCT (REJECTED) - Instrucción de pago rechazada.
    PixPaymentCancellation:
      type: object
      description: |
        Objeto que contiene los datos referentes al usuario pagador que solicitó la cancelación, el canal utilizado y el motivo.

        [Restricción] El objeto cancellation será obligatorio únicamente cuando el valor del campo status sea igual a CANC.
      required:
        - cancelledAt
        - cancelledBy
        - reason
        - cancelledFrom
      properties:
        reason:
          $ref: "#/components/schemas/EnumPaymentCancellationReasonType"
        cancelledFrom:
          $ref: "#/components/schemas/EnumPaymentCancellationFromType"
        cancelledAt:
          type: string
          description: "Fecha y hora en que se realizó la cancelación, conforme a la especificación [RFC-3339], formato UTC."
          format: date-time
          maxLength: 20
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$'
          example: "2021-05-21T08:30:00Z"
        cancelledBy:
          type: object
          description: Información relacionada al usuario pagador que solicitó la cancelación del pago.
          required:
            - document
          properties:
            document:
              type: object
              description: Objeto que consolida los datos del documento del usuario que solicitó la cancelación.
              required:
                - identification
                - rel
              properties:
                identification:
                  type: string
                  maxLength: 11
                  description: Número del documento del usuario pagador responsable por la cancelación del pago.
                  example: "11111111111"
                  pattern: '^\d{11}$'
                rel:
                  type: string
                  maxLength: 3
                  description: Tipo del documento del usuario pagador responsable por la cancelación del pago.
                  example: CPF
                  pattern: "^[A-Z]{3}$"
    EnumPaymentCancellationFromType:
      type: string
      enum:
        - INICIADORA
        - DETENTORA
      example: INICIADORA
      description: |
        Campo utilizado para informar el medio por el cual se realizó la cancelación.

        Valores posibles:

        INICIADORA - Pago cancelado por el usuario pagador en los canales de la iniciadora.

        DETENTORA - Pago cancelado por el usuario pagador en los canales de la detentora.
    EnumPaymentCancellationReasonType:
      type: string
      enum:
        - CANCELADO_PENDENCIA
        - CANCELADO_AGENDAMENTO
        - CANCELADO_MULTIPLAS_ALCADAS
      example: CANCELADO_PENDENCIA
      description: |
        El llenado de este campo para retorno debe realizarse por la detentora de cuentas a partir del estado del pago en el momento de la solicitud de cancelación. (p. ej., Estado del pago = PDNG → debe ser llenado con CANCELADO_PENDENCIA)

        Valores posibles:

        CANCELADO_PENDENCIA - Pago cancelado mientras estaba en estado PDNG.

        CANCELADO_AGENDAMENTO - Pago cancelado mientras estaba en estado SCHD.

        CANCELADO_MULTIPLAS_ALCADAS - Pago cancelado mientras estaba en estado PATC.
    PaymentConsent:
      required:
        - type
        - currency
        - amount
      type: object
      properties:
        type:
          allOf:
            - $ref: "#/components/schemas/PaymentTypeEnum"
            - nullable: false
        date:
          type: string
          example: 2021-12-01
        currency:
          type: string
          example: BRL
          nullable: false
        amount:
          type: string
          example: "100000.12"
          nullable: false
        ibgeTownCode:
          type: string
          example: "5300108"
        details:
          $ref: "#/components/schemas/PaymentDetails"
        creditorAccount:
          $ref: "#/components/schemas/CreditorAccount"
        schedule:
          $ref: "#/components/schemas/SchedulePayment"
    PaymentData:
      type: object
      properties:
        creditor:
          $ref: "#/components/schemas/Creditor"
        creditors:
          $ref: "#/components/schemas/Creditors"
        payment:
          $ref: "#/components/schemas/PaymentConsent"
        debtorAccount:
          $ref: "#/components/schemas/DebtorAccount"
        recurringConfiguration:
          $ref: "#/components/schemas/RecurringConfiguration"
        riskSignals:
          $ref: "#/components/schemas/RiskSignalsConsents"
    PaymentDetails:
      required:
        - localInstrument
        - creditorAccount
      type: object
      properties:
        localInstrument:
          allOf:
            - $ref: "#/components/schemas/LocalInstrumentEnum"
            - nullable: false
        qrCode:
          maxLength: 512
          type: string
          example:
            "00020104141234567890123426660014BR.GOV.BCB.PIX014466756C616E6F32303139406578616D706C652E636F6D27300012\
            \  \nBR.COM.OUTRO011001234567895204000053039865406123.455802BR5915NOMEDORECEBEDOR6008BRASILIA61087007490062\
            \  \n530515RP12345678-201950300017BR.GOV.BCB.BRCODE01051.0.080450014BR.GOV.BCB.PIX0123PADRAO.URL.PIX/0123AB\
            \  \nCD81390012BR.COM.OUTRO01190123.ABCD.3456.WXYZ6304EB76\n"
        proxy:
          maxLength: 77
          type: string
          example: "12345678901"
        creditorAccount:
          allOf:
            - $ref: "#/components/schemas/CreditorAccount"
            - nullable: false
    RiskSignalsConsents:
      type: object
      required:
        - deviceId
        - isRootedDevice
        - screenBrightness
        - elapsedTimeSinceBoot
        - osVersion
        - userTimeZoneOffset
        - language
        - screenDimensions
        - accountTenure
      description: |
        Señales de riesgo para la iniciación de pagos automáticos.

        [Restricción] Debe enviarse cuando el consentimiento sea para el producto Pix Automático (el objeto "/data/recurringConfiguration/automatic" usado en el oneOf). Solo estará presente después de la primera edición del consentimiento de larga duración.
      properties:
        deviceId:
          type: string
          description: ID único del dispositivo generado por la plataforma.
          example: 00000000-54b3-e7c7-0000-000046bffd97
        isRootedDevice:
          type: boolean
          description: Indica si el dispositivo actualmente tiene permiso de “root”.
          example: false
        screenBrightness:
          type: number
          format: double
          description: |
            Indica el nivel de brillo de la pantalla del dispositivo.  
            En dispositivos Android el valor es un entero entre 0 y 255;  
            En dispositivos iOS el valor es un flotante entre 0.0 y 1.0.
        elapsedTimeSinceBoot:
          type: integer
          format: int64
          description: Indica por cuánto tiempo (en milisegundos) el dispositivo ha estado encendido.
        osVersion:
          type: string
          description: Versión del sistema operativo.
        userTimeZoneOffset:
          type: string
          description: |
            Indica la configuración de zona horaria del dispositivo del usuario en formato UTC offset: ±hh[:mm]
        language:
          type: string
          description: Indica el idioma del dispositivo en formato ISO 639-1.
        screenDimensions:
          type: object
          description: Dimensiones de la pantalla del dispositivo.
          required:
            - height
            - width
          properties:
            height:
              type: integer
              format: int64
              description: Altura de la pantalla en píxeles.
            width:
              type: integer
              format: int64
              description: Anchura de la pantalla en píxeles.
        accountTenure:
          type: string
          format: date
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
          description: Fecha de registro del cliente en la iniciadora.
        geolocation:
          type: object
          description: Datos de geolocalización del cliente mientras está conectado a la iniciadora.
          properties:
            latitude:
              type: number
              format: double
              description: Coordenada de latitud del cliente.
            longitude:
              type: number
              format: double
              description: Coordenada de longitud del cliente.
            type:
              type: string
              description: |
                Tipo de mecanismo utilizado para generar la geolocalización.
              enum:
                - COARSE
                - FINE
                - INFERRED
        isCallInProgress:
          type: boolean
          description: |
            Indica si hay una llamada activa en el momento del vínculo.

            [Restricción] Si la señal de riesgo está disponible (el cliente permitió su recolección), debe ser enviada.
        isDevModeEnabled:
          type: boolean
          description: Indica si el dispositivo está en modo desarrollador.
        isMockGPS:
          type: boolean
          description: Indica si el dispositivo está usando GPS simulado.
        isEmulated:
          type: boolean
          description: Indica si el dispositivo es emulado o real.
        isMonkeyRunner:
          type: boolean
          description: Indica el uso de MonkeyRunner.
        isCharging:
          type: boolean
          description: Indica si la batería del dispositivo está siendo cargada.
        antennaInformation:
          type: string
          description: Indica a qué antena está conectado el dispositivo.
        isUsbConnected:
          type: boolean
          description: Indica si el dispositivo está conectado vía USB.
        integrity:
          type: object
          description: |
            Informa sobre la integridad del dispositivo y de la aplicación.  
            En Android: conforme documentación Play API Integrity.  
            En iOS: conforme documentación App Attest.
          properties:
            appRecognitionVerdict:
              type: string
              description: Informa la integridad de la aplicación.
            deviceRecognitionVerdict:
              type: string
              description: Informa la integridad del dispositivo.
    RecurringConfiguration:
      type: object
      description: Campo destinado a la configuración de los diferentes productos de pagos recurrentes.
      oneOf:
        - $ref: "#/components/schemas/Sweeping"
    Sweeping:
      type: object
      required:
        - sweeping
      properties:
        sweeping:
          type: object
          description: Definición de la configuración de recurrencia para transferencias automáticas de fondos.
          properties:
            totalAllowedAmount:
              type: string
              minLength: 4
              maxLength: 19
              pattern: '^((\d{1,16}\.\d{2}))$'
              example: "100000.12"
              description: Valor máximo a ser alcanzado por la suma de todas las transacciones que utilizan el consentimiento autorizado por el cliente. Si el valor es superado, la detentora debe negar la transacción solicitada por la iniciadora.
            transactionLimit:
              type: string
              pattern: '^((\d{1,16}\.\d{2}))$'
              minLength: 4
              maxLength: 19
              example: "1000000.12"
              description: Valor máximo para cada transacción de pago asociada a este consentimiento. Si el valor del pago es mayor que este límite, la detentora debe rechazar la transacción.
            periodicLimits:
              $ref: "#/components/schemas/PeriodicLimits"
    PeriodicLimits:
      type: object
      description: Límites transaccionales por período determinados por el usuario pagador.
      properties:
        day:
          $ref: "#/components/schemas/Day"
        week:
          $ref: "#/components/schemas/Week"
        month:
          $ref: "#/components/schemas/Month"
        year:
          $ref: "#/components/schemas/Year"
    Day:
      type: object
      description: |
        Configura un límite transaccional diario determinado por el usuario pagador.

        [Restricción] Si se envía el objeto, al menos uno de los campos (`quantityLimit` o `transactionLimit`) debe ser completado.
      properties:
        quantityLimit:
          type: integer
          example: 2
          description: Cantidad máxima de transacciones permitidas durante un día.
        transactionLimit:
          type: string
          pattern: '^((\d{1,16}\.\d{2}))$'
          minLength: 4
          maxLength: 19
          example: "100000.12"
          description: Valor máximo a ser transaccionado diariamente.
    Week:
      type: object
      description: |
        Configura un límite transaccional semanal determinado por el usuario pagador.

        [Restricción] Si se envía el objeto, al menos uno de los campos (`quantityLimit` o `transactionLimit`) debe ser completado.
      properties:
        quantityLimit:
          type: integer
          example: 10
          description: Cantidad máxima de transacciones permitidas durante una semana.
        transactionLimit:
          type: string
          pattern: '^((\d{1,16}\.\d{2}))$'
          minLength: 4
          maxLength: 19
          example: "100000.12"
          description: Valor máximo a ser transaccionado semanalmente.
    Month:
      type: object
      description: |
        Configura un límite transaccional mensual determinado por el usuario pagador.

        [Restricción] Si se envía el objeto, al menos uno de los campos (`quantityLimit` o `transactionLimit`) debe ser completado.
      properties:
        quantityLimit:
          type: integer
          example: 30
          description: Cantidad máxima de transacciones permitidas durante un mes.
        transactionLimit:
          type: string
          pattern: '^((\d{1,16}\.\d{2}))$'
          minLength: 4
          maxLength: 19
          example: "100000.12"
          description: Valor máximo a ser transaccionado mensualmente.
    Year:
      type: object
      description: |
        Configura un límite transaccional anual determinado por el usuario pagador.

        [Restricción] Si se envía el objeto, al menos uno de los campos (`quantityLimit` o `transactionLimit`) debe ser completado.
      properties:
        quantityLimit:
          type: integer
          example: 100
          description: Cantidad máxima de transacciones permitidas durante un año.
        transactionLimit:
          type: string
          pattern: '^((\d{1,16}\.\d{2}))$'
          minLength: 4
          maxLength: 19
          example: "100000.12"
          description: Valor máximo a ser transaccionado en un año, a partir de la fecha definida en `/data/startDateTime`.
    PaymentPersonTypeEnum:
      enum:
        - PESSOA_NATURAL
        - PESSOA_JURIDICA
      type: string
    PaymentTypeEnum:
      enum:
        - PIX
      type: string
    Permission:
      type: object
      properties:
        name:
          type: string
          example: Nombre del permiso
        title:
          type: string
          example: Nombre inteligible del permiso
        description:
          type: string
          example: Descripción de lo que permite este permiso
    RequestRevokeOobConsent:
      required:
        - data
      type: object
      properties:
        data:
          allOf:
            - $ref: "#/components/schemas/RevokeConsentData"
            - nullable: false
        applicationName:
          description: Nombre de la aplicación cliente.
          type: string
    RequestRevokeOobPaymentConsent:
      required:
        - data
      type: object
      properties:
        data:
          allOf:
            - $ref: "#/components/schemas/RevokePaymentConsentData"
            - nullable: false
        applicationName:
          description: Nombre de la aplicación cliente.
          type: string
    RequestRevokeOobPaymentPayment:
      required:
        - data
      type: object
      properties:
        data:
          allOf:
            - $ref: "#/components/schemas/RevokePaymentPaymentData"
        applicationName:
          description: Nombre de la aplicación cliente
          type: string
    RequestPaymentConsentAuthorisation:
      required:
        - data
      type: object
      properties:
        data:
          allOf:
            - $ref: "#/components/schemas/RequestPaymentConsentAuthorisationData"
    RequestPaymentStatusChangeNotification:
      required:
        - data
      type: object
      properties:
        data:
          allOf:
            - $ref: "#/components/schemas/PaymentStatusChangeData"
            - description: Datos de notificación de cambio de estado del pago
              nullable: false
    PaymentIdLegacy:
      required:
        - key
      type: object
      description: Par clave/valor para el ID del pago encontrado en el sistema de backoffice
      properties:
        key:
          type: string
          example: internalPaymentId
          nullable: false
        value:
          type: string
          example: b5abdcde-7186-453a-a676-7f3955cef167
    Resource:
      type: object
      properties:
        resourceId:
          type: string
        type:
          $ref: "#/components/schemas/ResourceTypeEnum"
        status:
          $ref: "#/components/schemas/StatusResourceEnum"
        legacyId:
          type: array
          items:
            $ref: "#/components/schemas/KeyValueObject"
    ResourcePaymentId:
      required:
        - externalId
      type: object
      properties:
        externalId:
          type: string
          nullable: false
        legacyIds:
          type: array
          items:
            $ref: "#/components/schemas/KeyValueObject"
    ResourceTypeEnum:
      enum:
        - CUSTOMER
        - CREDIT_CARD_ACCOUNT
        - ACCOUNT
        - LOAN
        - FINANCING
        - UNARRANGED_ACCOUNT_OVERDRAFT
        - INVOICE_FINANCING
        - PAYMENT
      type: string
    ResponseConsentDetailSchema:
      type: object
      description: Respuesta de la ejecución del servicio
      properties:
        data:
          $ref: "#/components/schemas/ConsentDetail"
    ResponseConsentExtendsSchema:
      type: object
      properties:
        data:
          description: Respuesta de la ejecución del servicio
          type: array
          items:
            $ref: "#/components/schemas/ConsentExtends"
        links:
          allOf:
            - $ref: "#/components/schemas/Links"
            - description: Enlaces del servicio
        meta:
          allOf:
            - $ref: "#/components/schemas/Meta"
            - description: Información de metadatos
    ResponseConsentSummaryPaginationSchema:
      type: object
      properties:
        data:
          description: Respuesta de la ejecución del servicio
          type: array
          items:
            $ref: "#/components/schemas/ConsentSummary"
        links:
          allOf:
            - $ref: "#/components/schemas/Links"
            - description: Enlaces del servicio
        meta:
          allOf:
            - $ref: "#/components/schemas/Meta"
            - description: Información de metadatos
    ConsentRevocation:
      oneOf:
        - $ref: "#/components/schemas/Revocation"
        - $ref: "#/components/schemas/RevocationPaymentOob"
        - $ref: "#/components/schemas/RevocationEnrollment"
    ConsentRejection:
      oneOf:
        - $ref: "#/components/schemas/Rejection"
        - $ref: "#/components/schemas/RejectionPaymentOob"
        - $ref: "#/components/schemas/RejectionEnrollment"
    Revocation:
      description: Información sobre la revocación del consentimiento de compartición de datos
      required:
        - revokedBy
        - reason
      type: object
      properties:
        loggedUser:
          $ref: "#/components/schemas/LoggedUser"
        revokedBy:
          allOf:
            - $ref: "#/components/schemas/RevokedByEnum"
            - example: TPP
              nullable: false
        reason:
          allOf:
            - $ref: "#/components/schemas/RevocationReason"
            - nullable: false
    Rejection:
      description: Información sobre la rejección del consentimiento de compartición de datos
      required:
        - reason
        - rejectedBy
      type: object
      properties:
        loggedUser:
          $ref: "#/components/schemas/LoggedUser"
        reason:
          allOf:
            - $ref: "#/components/schemas/RejectedReason"
            - nullable: false
        rejectedBy:
          allOf:
            - $ref: "#/components/schemas/RejectedByEnum"
            - example: USER
              nullable: false
    RevocationReason:
      required:
        - code
      type: object
      properties:
        additionalInformation:
          maxLength: 140
          type: string
          example: Riesgo de fraude identificado
        code:
          allOf:
            - $ref: "#/components/schemas/RevocationReasonCodeEnum"
            - example: FRAUD
              nullable: false
    RevocationEnrollment:
      type: object
      required:
        - cancelledFrom
        - reason
      properties:
        cancelledBy:
          $ref: "#/components/schemas/LoggedUser"
        reason:
          type: object
          required:
            - code
          description: Motivo de la revocación del vínculo de cuenta.
          properties:
            code:
              $ref: "#/components/schemas/EnrollmentRevocationReasonCodeEnum"
        additionalInformation:
          type: string
          pattern: '[\w\W\s]*'
          example: Contrato entre iniciadora y detentora interrumpido
          maxLength: 2048
        cancelledFrom:
          $ref: "#/components/schemas/EnumEnrollmentCancelledFrom"
        rejectedAt:
          $ref: "#/components/schemas/EnrollmentRejectedAt"
    RejectionEnrollment:
      type: object
      required:
        - cancelledFrom
        - reason
      properties:
        cancelledBy:
          $ref: "#/components/schemas/LoggedUser"
        reason:
          type: object
          required:
            - code
          description: Motivo de la rejección del vínculo de cuenta.
          properties:
            code:
              $ref: "#/components/schemas/EnrollmentRejectedReasonCodeEnum"
        additionalInformation:
          type: string
          pattern: '[\w\W\s]*'
          example: Contrato entre iniciadora y detentora interrumpido
          maxLength: 2048
        cancelledFrom:
          $ref: "#/components/schemas/EnumEnrollmentCancelledFrom"
        rejectedAt:
          $ref: "#/components/schemas/EnrollmentRejectedAt"
    RejectedReason:
      required:
        - code
      type: object
      properties:
        additionalInformation:
          maxLength: 140
          type: string
          example: Riesgo de fraude identificado
        code:
          allOf:
            - $ref: "#/components/schemas/RejectedReasonCodeEnum"
            - example: CONSENT_EXPIRED
              nullable: false
    RevocationReasonCodeEnum:
      enum:
        - FRAUD
        - ACCOUNT_CLOSURE
        - OTHER
      type: string
    EnrollmentRevocationReasonCodeEnum:
      enum:
        - REVOGADO_VALIDADE_EXPIRADA
        - REVOGADO_MANUALMENTE
        - REVOGADO_FALHA_INFRAESTRUTURA
        - REVOGADO_SEGURANCA_INTERNA
        - REVOGADO_OUTRO
      type: string
    RevokePaymentConsentData:
      type: object
      properties:
        rejection:
          $ref: "#/components/schemas/RejectionPaymentOob"
        revocation:
          $ref: "#/components/schemas/RevocationPaymentOob"
    RevokePaymentPaymentData:
      type: object
      required:
        - legacyId
      properties:
        legacyId:
          type: array
          items:
            $ref: "#/components/schemas/KeyValueObject"
      allOf:
        - $ref: "#/components/schemas/RevokePaymentConsentData"
    RequestPaymentConsentAuthorisationData:
      type: object
      required:
        - authorised
      properties:
        authorised:
          type: boolean
          example: true
    RejectedReasonCodeEnum:
      enum:
        - CONSENT_EXPIRED
        - CUSTOMER_MANUALLY_REJECTED
        - CUSTOMER_MANUALLY_REVOKED
        - CONSENT_MAX_DATE_REACHED
        - CONSENT_TECHNICAL_ISSUE
        - INTERNAL_SECURITY_REASON
      type: string
    EnrollmentRejectedReasonCodeEnum:
      enum:
        - REJEITADO_TEMPO_EXPIRADO_RISK_SIGNALS,
        - REJEITADO_TEMPO_EXPIRADO_ACCOUNT_HOLDER_VALIDATION,
        - REJEITADO_TEMPO_EXPIRADO_ENROLLMENT,
        - REJEITADO_MAXIMO_CHALLENGES_ATINGIDO,
        - REJEITADO_MANUALMENTE,
        - REJEITADO_DISPOSITIVO_INCOMPATIVEL,
        - REJEITADO_FALHA_INFRAESTRUTURA,
        - REJEITADO_SEGURANCA_INTERNA,
        - REJEITADO_FALHA_HYBRID_FLOW,
        - REJEITADO_FALHA_FIDO,
        - REJEITADO_OUTRO
      type: string
    RevocationPaymentOob:
      type: object
      properties:
        revokedFrom:
          $ref: "#/components/schemas/RecurringConsentRejectedFromEnum"
        reason:
          $ref: "#/components/schemas/RecurringConsentRevocationReason"
        revokedAt:
          format: date-time
          type: string
        revokedBy:
          $ref: "#/components/schemas/RevokedByAutomaticPaymentEnum"
    RevokedByAutomaticPaymentEnum:
      enum:
        - INICIADORA
        - USUARIO
        - DETENTORA
      type: string
    RejectionPaymentOob:
      type: object
      properties:
        rejectedFrom:
          $ref: "#/components/schemas/RecurringConsentRejectedFromEnum"
        reason:
          $ref: "#/components/schemas/RejectionReason"
        rejectedAt:
          format: date-time
          type: string
        rejectedBy:
          $ref: "#/components/schemas/RejectedByAutomaticPaymentEnum"
    RejectedByAutomaticPaymentEnum:
      enum:
        - INICIADORA
        - USUARIO
        - DETENTORA
      type: string
    RecurringConsentRevocationReason:
      type: object
      properties:
        code:
          $ref: "#/components/schemas/ConsentRevocationReasonCodeEnum"
        detail:
          type: string
    RejectionReason:
      required:
        - code
        - detail
      type: object
      properties:
        code:
          allOf:
            - $ref: "#/components/schemas/ConsentRejectionReasonCodeEnum"
            - example: CONTAS_ORIGEM_DESTINO_IGUAIS
        detail:
          type: string
    EnrollmentRejectedReason:
      required:
        - code
      type: object
      properties:
        additionalInformation:
          maxLength: 140
          type: string
          example: Razón cuando el código es REJEITADO_OUTRO
        code:
          allOf:
            - $ref: "#/components/schemas/EnrollmentRejectedReasonCodeEnum"
            - example: REJEITADO_TEMPO_EXPIRADO_RISK_SIGNALS
              nullable: false
    RecurringConsentRejectedFromEnum:
      enum:
        - INICIADORA
        - DETENTORA
      type: string
    ConsentRevocationReasonCodeEnum:
      enum:
        - NAO_INFORMADO
        - REVOGADO_USUARIO
        - REVOGADO_RECEBEDOR
      type: string
    ConsentRejectionReasonCodeEnum:
      enum:
        - VALOR_INVALIDO
        - NAO_INFORMADO
        - FALHA_INFRAESTRUTURA
        - TEMPO_EXPIRADO_AUTORIZACAO
        - TEMPO_EXPIRADO_CONSUMO
        - REJEITADO_USUARIO
        - CONTAS_ORIGEM_DESTINO_IGUAIS
        - CONTA_NAO_PERMITE_PAGAMENTO
        - SALDO_INSUFICIENTE
        - VALOR_ACIMA_LIMITE
        - QRCODE_INVALIDO
        - CONTA_DIVERGENTE_DA_SOLICITADA
      type: string
    PaymentStatusEnum:
      enum:
        - RCVD
        - ACCP
        - ACPD
        - ACSC
        - PATC
        - SCHD
        - CANC
        - PDNG
        - RJCT
      type: string
    StatusUpdateDateTime:
      type: string
      format: date-time
      pattern: >-
        ^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$
      example: "2020-07-21T08:30:00Z"
      description: >
        Fecha y hora de la última actualización de la iniciación del pago.
        Una cadena con fecha y hora conforme a la especificación
        RFC-3339, siempre utilizando zona horaria UTC (formato UTC).
    RevokeConsentData:
      required:
        - status
        - revocation
      type: object
      properties:
        revocation:
          allOf:
            - $ref: "#/components/schemas/Revocation"
            - nullable: false
        status:
          allOf:
            - $ref: "#/components/schemas/StatusEnum"
            - example: REVOKED
              nullable: false
    PaymentStatusChangeData:
      required:
        - legacyId
        - paymentStatus
        - paymentStatusUpdateDateTime
      type: object
      properties:
        legacyId:
          description: ID de pago del sistema de backoffice
          type: array
          items:
            $ref: "#/components/schemas/PaymentIdLegacy"
          nullable: false
        paymentStatus:
          allOf:
            - $ref: "#/components/schemas/PaymentStatusEnum"
            - example: CANC
            - nullable: false
        paymentStatusUpdateDateTime:
          allOf:
            - $ref: "#/components/schemas/StatusUpdateDateTime"
        rejectionReason:
          $ref: "#/components/schemas/PaymentRejection"
    MetadataData:
      required:
        - data
      type: object
      properties:
        data:
          type: string
    PaymentRejection:
      type: object
      description: "Motivo del rechazo del pago. Información complementaria sobre el motivo del estado. Debe enviarse cuando el campo /data/paymentStatus sea igual a RJCT (REJECTED)."
      properties:
        code:
          $ref: "#/components/schemas/PaymentRejectionReasonEnum"
        detail:
          example: "La cuenta seleccionada no posee saldo suficiente para realizar el pago."
          type: string
    PaymentRejectionReasonEnum:
      type: string
      enum:
        - SALDO_INSUFICIENTE
        - VALOR_ACIMA_LIMITE
        - VALOR_INVALIDO
        - COBRANCA_INVALIDA
        - NAO_INFORMADO
        - PAGAMENTO_DIVERGENTE_CONSENTIMENTO
        - DETALHE_PAGAMENTO_INVALIDO
        - PAGAMENTO_RECUSADO_DETENTORA
        - PAGAMENTO_RECUSADO_SPI
        - FALHA_INFRAESTRUTURA
        - FALHA_INFRAESTRUTURA_SPI
        - FALHA_INFRAESTRUTURA_DICT
        - FALHA_INFRAESTRUTURA_ICP
        - FALHA_INFRAESTRUTURA_PSP_RECEBEDOR
        - FALHA_INFRAESTRUTURA_DETENTORA
        - CONTAS_ORIGEM_DESTINO_IGUAIS
        - FALHA_AGENDAMENTO_PAGAMENTOS
        - TITULARIDADE_INCONSISTENTE
    ResponseConsentListSchema:
      type: object
      properties:
        data:
          description: Respuesta de ejecución del servicio
          type: array
          items:
            $ref: "#/components/schemas/ActiveConsent"
        links:
          allOf:
            - $ref: "#/components/schemas/Links"
            - description: Enlaces del servicio
        meta:
          allOf:
            - $ref: "#/components/schemas/Meta"
    ActiveConsent:
      type: object
      properties:
        externalId:
          description: El consentId es el identificador único del consentimiento y debe ser un URN - Uniform Resource Name
          type: string
          example: urn:amazingbank:899dd8b2-34d1-4c75-b8de-f0ffa51ca720
        personDocumentType:
          type: string
          example: CPF
        personDocumentNumber:
          type: string
          example: "77721813700"
        businessDocumentType:
          type: string
          example: CNPJ
        businessDocumentNumber:
          type: string
          example: "33273542000197"
        creationDateTime:
          format: date-time
          type: string
          example: 2022-01-30T17:31:28Z
        status:
          $ref: "#/components/schemas/StatusEnum"
        expirationDateTime:
          format: date-time
          type: string
    RevokeDataSharingConsentData:
      required:
        - data
      type: object
      properties:
        data:
          required:
            - rejection
          type: object
          properties:
            rejection:
              allOf:
                - $ref: "#/components/schemas/Rejection"
                - nullable: false
        applicationName:
          description: Nombre de la aplicación cliente
          type: string
    RevokedByEnum:
      enum:
        - USER
        - ASPSP
        - TPP
      type: string
    RejectedByEnum:
      enum:
        - ASPSP
        - USER
        - TPP
      type: string
    SchedulePayment:
      required:
        - single
      type: object
      oneOf:
        - $ref: "#/components/schemas/ScheduleSingle"
        - $ref: "#/components/schemas/ScheduleDaily"
        - $ref: "#/components/schemas/ScheduleWeekly"
        - $ref: "#/components/schemas/ScheduleMonthly"
        - $ref: "#/components/schemas/ScheduleCustom"
    ScheduleSingle:
      type: object
      required:
        - single
      properties:
        single:
          type: object
          description: Define la política de programación única.
          required:
            - date
          properties:
            date:
              type: string
              format: date
              maxLength: 10
              pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
              example: "2023-08-23"
              description: |
                Define la fecha objetivo de la liquidación del pago.
                Se debe utilizar la zona horaria de Brasilia para la creación y razonamiento sobre los datos de este campo.

                [Restricción] Este campo debe ser siempre como mínimo D+1 día corrido respecto a la fecha del consentimiento considerando la zona horaria de Brasilia, y como máximo D+730 días corridos desde la fecha del consentimiento, también considerando la zona horaria de Brasilia.
    ScheduleDaily:
      type: object
      required:
        - daily
      properties:
        daily:
          type: object
          required:
            - startDate
            - quantity
          properties:
            startDate:
              description: Define el inicio de vigencia de la recurrencia.
              type: string
              format: date
              pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
              maxLength: 10
              example: "2023-08-23"
            quantity:
              description: Define la cantidad de pagos que serán enviados para liquidación.
              type: integer
              format: int32
              minimum: 2
              maximum: 60
              example: 3
    ScheduleWeekly:
      type: object
      required:
        - weekly
      properties:
        weekly:
          type: object
          required:
            - dayOfWeek
            - startDate
            - quantity
          properties:
            dayOfWeek:
              description: Define el día de la semana planificado para la ocurrencia de las liquidaciones.
              type: string
              enum:
                - SEGUNDA_FEIRA
                - TERCA_FEIRA
                - QUARTA_FEIRA
                - QUINTA_FEIRA
                - SEXTA_FEIRA
                - SABADO
                - DOMINGO
              example: QUINTA_FEIRA
            startDate:
              description: Define el inicio de vigencia de la recurrencia.
              type: string
              format: date
              pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
              maxLength: 10
              example: "2023-08-23"
            quantity:
              description: Define la cantidad de pagos que serán enviados para liquidación.
              type: integer
              format: int32
              minimum: 2
              maximum: 60
              example: 10
    ScheduleMonthly:
      type: object
      required:
        - monthly
      properties:
        monthly:
          type: object
          required:
            - dayOfMonth
            - startDate
            - quantity
          properties:
            dayOfMonth:
              description: Define el día del mes planificado para la ocurrencia de las liquidaciones.
              type: integer
              minimum: 1
              maximum: 31
              example: 10
            startDate:
              description: Define el inicio de vigencia de la recurrencia.
              type: string
              format: date
              pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
              maxLength: 10
              example: "2023-08-23"
            quantity:
              description: Define la cantidad de pagos que serán enviados para liquidación.
              type: integer
              format: int32
              minimum: 2
              maximum: 24
              example: 24
    ScheduleCustom:
      type: object
      required:
        - custom
      properties:
        custom:
          type: object
          description: |
            [Restricción] Las fechas enviadas en la lista (array “dates”) no pueden repetirse.
            Si se envían fechas repetidas, la detentora debe rechazar la creación del consentimiento informando el error PARAMETRO_INVALIDO.
          required:
            - dates
            - additionalInformation
          properties:
            dates:
              description: Define los días en los que están planificadas las ocurrencias de liquidación.
              type: array
              maxItems: 60
              minItems: 2
              example: ["2023-08-23", "2023-09-26"]
              items:
                type: string
                format: date
                pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
                maxLength: 10
                example: "2023-08-23"
            additionalInformation:
              type: string
              description: |
                Texto libre para que la iniciadora complete de forma comprensible para el usuario aprobador/pagador.
                El texto puede ser utilizado por la detentora para mostrar el resumen de la transacción durante la aprobación del usuario.
              pattern: '[\w\W\s]*'
              maxLength: 255
              example: Todas las quintas y domingos por 6 meses
    StatusEnum:
      enum:
        - AUTHORISED
        - AWAITING_AUTHORISATION
        - REJECTED
        - CONSUMED
        - REVOKED
      type: string
    StatusResourceEnum:
      enum:
        - AVAILABLE
        - UNAVAILABLE
        - NON_SELECTED
      type: string
    UUID:
      format: uuid
      pattern: "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}"
      type: string
    ResponseMapItpLegacyIds:
      type: object
      properties:
        data:
          allOf:
            - $ref: "#/components/schemas/PaymentLegacyIdsByItp"
            - description: Respuesta de ejecución del servicio
    PaymentLegacyIdsByItp:
      type: object
      properties:
        itpLegacyIds:
          type: array
          items:
            $ref: "#/components/schemas/ItpLegacyIds"
    ItpLegacyIds:
      type: object
      properties:
        orgName:
          type: string
        legacyIds:
          type: array
          items:
            type: string
    EnrollmentData:
      type: object
      properties:
        debtorAccount:
          $ref: "#/components/schemas/DebtorAccount"
        riskSignals:
          type: array
          items:
            $ref: "#/components/schemas/PaymentManualRiskSignal"
        enrollmentName:
          type: string
          description: Nombre del dispositivo autorizado por el cliente para el vínculo de dispositivo de la JSR.
          example: "Mi Teléfono"
        dailyLimit:
          format: double
          type: number
          example: 1000.00
        transactionLimit:
          format: double
          type: number
          example: 100.00
    PaymentManualRiskSignal:
      type: object
      properties:
        deviceId:
          type: string
          description: Identificador único del dispositivo.
        isRootedDevice:
          type: boolean
          description: Indica si el dispositivo tiene root.
        screenBrightness:
          type: number
          format: double
          description: Nivel de brillo de la pantalla del dispositivo.
        elapsedTimeSinceBoot:
          type: integer
          format: int64
          description: Tiempo transcurrido desde el último arranque del dispositivo.
        osVersion:
          type: string
          description: Versión del sistema operativo del dispositivo.
        userTimeZoneOffset:
          type: string
          description: Desplazamiento de la zona horaria del usuario.
        language:
          type: string
          description: Idioma utilizado por el dispositivo.
        screenDimensions:
          $ref: "#/components/schemas/ScreenDimensions"
        accountTenure:
          type: string
          description: Tiempo que la cuenta ha estado activa.
        geolocation:
          $ref: "#/components/schemas/Geolocation"
        isCallingProgress:
          type: boolean
          description: Indica si hay una llamada en progreso.
        isDevModeEnabled:
          type: boolean
          description: Indica si el modo desarrollador está activado.
        isMockGPS:
          type: boolean
          description: Indica si el dispositivo está usando una ubicación GPS simulada.
        isEmulated:
          type: boolean
          description: Indica si el dispositivo es emulado.
        isMonkeyRunner:
          type: boolean
          description: Indica el uso de la herramienta MonkeyRunner.
        isCharging:
          type: boolean
          description: Indica si el dispositivo está cargándose.
        antennaInformation:
          type: string
          description: Información sobre la antena del dispositivo.
        isUsbConnected:
          type: boolean
          description: Indica si el dispositivo está conectado vía USB.
        integrity:
          $ref: "#/components/schemas/Integrity"
    ScreenDimensions:
      type: object
      properties:
        height:
          type: integer
          format: int64
          description: Altura de la pantalla del dispositivo en píxeles.
        width:
          type: integer
          format: int64
          description: Anchura de la pantalla del dispositivo en píxeles.
    Geolocation:
      type: object
      properties:
        latitude:
          type: number
          format: double
          description: Coordenada de latitud de la ubicación del dispositivo.
        longitude:
          type: number
          format: double
          description: Coordenada de longitud de la ubicación del dispositivo.
        type:
          type: string
          description: Tipo de dato de geolocalización.
    Integrity:
      type: object
      properties:
        appRecognitionVerdict:
          type: string
          description: Veredicto del proceso de reconocimiento de la aplicación.
        deviceRecognitionVerdict:
          type: string
          description: Veredicto del proceso de reconocimiento del dispositivo.
    RequestRevokeOobEnrollmentConsent:
      required:
        - data
      type: object
      properties:
        data:
          allOf:
            - $ref: "#/components/schemas/EnrollmentDataPatch"
            - nullable: false
        applicationName:
          description: Nombre de la aplicación cliente
          type: string
    EnrollmentDataPatch:
      required:
        - cancellation
      type: object
      properties:
        cancellation:
          allOf:
            - $ref: "#/components/schemas/EnrollmentCancellationPatch"
            - nullable: false
    EnrollmentCancellationPatch:
      type: object
      properties:
        cancelledBy:
          $ref: "#/components/schemas/ConsentPatchLoggedUser"
        reason:
          $ref: "#/components/schemas/EnrollmentReason"
        additionalInformation:
          maxLength: 2048
          type: string
    ConsentPatchLoggedUser:
      required:
        - document
      type: object
      properties:
        document:
          allOf:
            - $ref: "#/components/schemas/ConsentPatchDocument"
            - nullable: false
    ConsentPatchDocument:
      required:
        - identification
        - rel
      type: object
      properties:
        identification:
          type: string
          example: "52847808507"
          nullable: false
        rel:
          type: string
          example: CPF
          nullable: false
    EnrollmentReason:
      type: object
      properties:
        rejectionReason:
          $ref: "#/components/schemas/EnrollmentRejectedReasonCodeEnum"
        revocationReason:
          $ref: "#/components/schemas/EnrollmentRevocationReasonCodeEnum"
    EnumEnrollmentCancelledFrom:
      type: string
      enum:
        - INICIADORA
        - DETENTORA
      description: |
        Campo utilizado para informar el medio por el cual se realizó la cancelación del vínculo de cuenta. Valores posibles:

          INICIADORA - Vínculo de cuenta en los canales de la iniciadora.

          DETENTORA - Vínculo de cuenta en los canales de la detentora.
    EnrollmentRejectedAt:
      type: string
      format: date-time
      example: "2023-07-12T08:30:00Z"
      pattern: ^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$
      maxLength: 20
      description: Instante de rechazo del vínculo de cuenta en el entorno de la detentora.
    AutomaticPaymentConsentEdition:
      type: object
      properties:
        maximumVariableAmount:
          description: Definición de la configuración de recurrencia para pagos automáticos.
          maxLength: 19
          minLength: 4
          type: string
          example: "1000000.12"
        useOverdraftLimit:
          description: Indica si el consentimiento permite el uso del límite del cheque especial.
          type: boolean
          example: true
  securitySchemes:
    jwt:
      type: http
      description: Token JWT
      scheme: bearer
      bearerFormat: jwt
