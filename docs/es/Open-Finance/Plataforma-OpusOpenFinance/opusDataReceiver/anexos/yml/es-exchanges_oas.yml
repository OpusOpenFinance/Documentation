openapi: 3.0.0
info:
  title: API Cambios - Opus Data Receiver
  description: |
    API de informaciones de operaciones de Cambio guardadas en el ODR. Utiliza como estándar la misma definición de Cambio del Open Finance Brasil – Fase 4.
  
    API que retorna informaciones de operaciones de Cambio realizadas en las instituciones transmisoras por sus clientes, incluyendo datos como informaciones de la operación contratada, valor de la operación en moneda nacional y moneda extranjera, clasificación de la operación, forma de entrega, VET y, cuando aplicable, valor a liquidar.
  
    También serán compartidos los eventos de alteración de la operación, caso existan, con las informaciones modificadas.
  
    No posee segregación entre persona natural y persona jurídica.
    Requiere registro del cliente en el ODR del cliente para todos los endpoints.

    __Son alcance de compartimiento las operaciones negociadas en el mercado primario, spot (inclusive especie, tarjeta prepago, tarjeta de débito) y futuro (inclusive ACC, ACE o trava cambiaria).__

    __Deben ser compartidas las operaciones contratadas y disponibles en los canales electrónicos de la institución, incluso en las situaciones en las cuales la operación aún no haya sido registrada junto al Banco Central. Caso el evento de contratación sea anulado en el Sistema de Cambio, lo que significa que la operación fue anulada, entonces esta operación deja de ser alcance de exposición. Caso el registro ocurra la operación debe ser complementada con el número de operación registrado y los eventos ocurridos.__

    __Eventos de vinculación de operaciones no son alcance de exposición.__

    __La exposición se dará por cada operación de cambio contratada por el cliente.__
  version: 1.0.0
  license:
    name: Apache 2.0
    url: 'https://www.apache.org/licenses/LICENSE-2.0'
tags:
  - name: Lista de Productos
    description: Obtiene la lista de operaciones de Cambio mantenidas por el cliente en la institución transmisora y para las cuales él haya fornecido consentimiento.
  - name: Detalles de Operación
    description: Obtiene los datos de la operación de Cambio identificada por operationId.
  - name: Eventos
    description: Obtiene los datos de los eventos de la operación de Cambio identificada por operationId.
paths:
  /setup/exchanges/operations:
    get:
      tags:
        - Lista de Productos
      summary: Obtiene la lista de operaciones de Cambio mantenidas por el cliente en la institución transmisora y para las cuales él haya fornecido consentimiento.
      operationId: exchangesGetOperations
      description: Obtiene la lista de operaciones de Cambio mantenidas por el cliente en la institución transmisora y para las cuales él haya fornecido consentimiento.
      parameters:
        - $ref: '#/components/parameters/SetupID'
        - $ref: '#/components/parameters/xFapiAuthDate'
        - $ref: '#/components/parameters/xFapiCustomerIpAddress'
        - $ref: '#/components/parameters/xFapiInteractionId'
        - $ref: '#/components/parameters/xCustomerUserAgent'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/pagination-key'
      responses:
        '200':
          $ref: '#/components/responses/OKResponseProductList'
        '400':
          $ref: '#/components/responses/BadRequestWithAdditionalProperties'
        '401':
          $ref: '#/components/responses/UnauthorizedWithAdditionalProperties'
        '403':
          $ref: '#/components/responses/ForbiddenWithAdditionalProperties'
        '404':
          $ref: '#/components/responses/NotFoundWithAdditionalProperties'
        '405':
          $ref: '#/components/responses/MethodNotAllowedWithAdditionalProperties'
        '406':
          $ref: '#/components/responses/NotAcceptableWithAdditionalProperties'
        '422':
          $ref: '#/components/responses/UnprocessableEntityWithAdditionalProperties'
        '423':
          $ref: '#/components/responses/LockedWithAdditionalProperties'
        '429':
          $ref: '#/components/responses/TooManyRequestsWithAdditionalProperties'
        '502':
          $ref: '#/components/responses/InternalServerErrorWithAdditionalProperties'
        
  /setup/exchanges/operations/{operationId}:
    get:
      tags:
        - Detalles de Operación
      summary: Obtiene los datos de la operación de Cambio identificada por operationId.
      operationId: exchangesGetOperationsOperationId
      description: Obtiene los datos de la operación de Cambio identificada por operationId. Las alteraciones efectuadas en la operación original deben ser representadas a través de eventos. La operación original no es actualizada para reflejar eventuales eventos de alteración. Solamente los campos `/operationOutstandingBalance` y `/dueDate` deben ser actualizados
      parameters:
        - $ref: '#/components/parameters/OperationId'
        - $ref: '#/components/parameters/SetupID'
        - $ref: '#/components/parameters/xFapiAuthDate'
        - $ref: '#/components/parameters/xFapiCustomerIpAddress'
        - $ref: '#/components/parameters/xFapiInteractionId'
        - $ref: '#/components/parameters/xCustomerUserAgent'
      responses:
        '200':
          $ref: '#/components/responses/OKResponseOperationDetails'
        '400':
          $ref: '#/components/responses/BadRequestWithAdditionalProperties'
        '401':
          $ref: '#/components/responses/UnauthorizedWithAdditionalProperties'
        '403':
          $ref: '#/components/responses/ForbiddenWithAdditionalProperties'
        '404':
          $ref: '#/components/responses/NotFoundWithAdditionalProperties'
        '405':
          $ref: '#/components/responses/MethodNotAllowedWithAdditionalProperties'
        '406':
          $ref: '#/components/responses/NotAcceptableWithAdditionalProperties'
        '422':
          $ref: '#/components/responses/UnprocessableEntityWithAdditionalProperties'
        '423':
          $ref: '#/components/responses/LockedWithAdditionalProperties'
        '429':
          $ref: '#/components/responses/TooManyRequestsWithAdditionalProperties'
        '502':
          $ref: '#/components/responses/InternalServerErrorWithAdditionalProperties'
        
  /setup/exchanges/operations/{operationId}/events:
    get:
      tags:
        - Eventos
      summary: Obtiene los datos de los eventos de la operación de Cambio identificada por operationId.
      operationId: exchangesGetOperationsOperationIdEvents
      description: Obtiene los datos de los eventos de la operación de Cambio identificada por operationId.
      parameters:
        - $ref: '#/components/parameters/OperationId'
        - $ref: '#/components/parameters/SetupID'
        - $ref: '#/components/parameters/xFapiAuthDate'
        - $ref: '#/components/parameters/xFapiCustomerIpAddress'
        - $ref: '#/components/parameters/xFapiInteractionId'
        - $ref: '#/components/parameters/xCustomerUserAgent'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/pagination-key'
      responses:
        '200':
          $ref: '#/components/responses/OKResponseEvents'
        '400':
          $ref: '#/components/responses/BadRequestWithAdditionalProperties'
        '401':
          $ref: '#/components/responses/UnauthorizedWithAdditionalProperties'
        '403':
          $ref: '#/components/responses/ForbiddenWithAdditionalProperties'
        '404':
          $ref: '#/components/responses/NotFoundWithAdditionalProperties'
        '405':
          $ref: '#/components/responses/MethodNotAllowedWithAdditionalProperties'
        '406':
          $ref: '#/components/responses/NotAcceptableWithAdditionalProperties'
        '422':
          $ref: '#/components/responses/UnprocessableEntityWithAdditionalProperties'
        '423':
          $ref: '#/components/responses/LockedWithAdditionalProperties'
        '429':
          $ref: '#/components/responses/TooManyRequestsWithAdditionalProperties'
        '502':
          $ref: '#/components/responses/InternalServerErrorWithAdditionalProperties'
        
components:
  schemas:
    Links:
      type: object
      description: Referencias para otros recursos de la API solicitada.
      required:
        - self
      properties:
        self:
          type: string
          format: uri
          maxLength: 2000
          description: URI completo que generó la respuesta actual.
          example: 'https://api.banco.com.br/open-banking/api/v1/resource'
          pattern: '^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)$'
        first:
          type: string
          format: uri
          maxLength: 2000
          description: URI de la primera página que originó esta lista de resultados. Restricción - Obligatorio cuando no sea la primera página de la respuesta
          example: 'https://api.banco.com.br/open-banking/api/v1/resource'
          pattern: '^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)$'
        prev:
          type: string
          format: uri
          maxLength: 2000
          description: "URI de la página anterior de esta lista de resultados. Restricción - \tObligatorio cuando no sea la primera página de la respuesta"
          example: 'https://api.banco.com.br/open-banking/api/v1/resource'
          pattern: '^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)$'
        next:
          type: string
          format: uri
          maxLength: 2000
          description: URI de la próxima página de esta lista de resultados. Restricción - Obligatorio cuando no sea la última página de la respuesta
          example: 'https://api.banco.com.br/open-banking/api/v1/resource'
          pattern: '^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)$'
        last:
          type: string
          format: uri
          maxLength: 2000
          description: URI de la última página de esta lista de resultados. Restricción - Obligatorio cuando no sea la última página de la respuesta
          example: 'https://api.banco.com.br/open-banking/api/v1/resource'
          pattern: '^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)$'
      additionalProperties: false
    LinksOperationId:
      type: object
      description: Referencias para otros recursos de la API solicitada.
      required:
        - self
      properties:
        self:
          type: string
          format: uri
          maxLength: 2000
          description: URI completo que generó la respuesta actual.
          example: 'https://api.banco.com.br/open-banking/api/v1/resource'
          pattern: '^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)$'
      additionalProperties: false
    OpenDataMetaOperationId:
      type: object
      description: Meta informaciones referente a la API solicitada.
      required:
        - requestDateTime
      properties:
        requestDateTime:
          description: 'Fecha y hora de la consulta, conforme especificación RFC-3339, formato UTC.'
          type: string
          maxLength: 20
          format: date-time
          example: '2021-05-21T08:30:00Z'
      additionalProperties: false
    OpenDataMeta:
      type: object
      description: Meta informaciones referente a la API solicitada.
      required:
        - totalRecords
        - totalPages
        - requestDateTime
      properties:
        totalRecords:
          type: integer
          format: int32
          description: Número total de registros en el resultado
          example: 1
        totalPages:
          type: integer
          format: int32
          description: Número total de páginas en el resultado
          example: 1
        requestDateTime:
          description: 'Fecha y hora de la consulta, conforme especificación RFC-3339, formato UTC.'
          type: string
          maxLength: 20
          format: date-time
          example: '2021-05-21T08:30:00Z'
      additionalProperties: false
    OKResponseProductList:
      type: object
      required:
        - data
        - links
        - meta
      properties:
        data:
          type: array
          minItems: 0
          items:
            $ref: '#/components/schemas/ProductList'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/OpenDataMeta'
      additionalProperties: false
    OKResponseOperationDetails:
      type: object
      required:
        - data
        - links
        - meta
      properties:
        data:
          $ref: '#/components/schemas/OperationDetails'
        links:
          $ref: '#/components/schemas/LinksOperationId'
        meta:
          $ref: '#/components/schemas/OpenDataMetaOperationId'
    OKResponseEvents:
      type: object
      required:
        - data
        - links
        - meta
      properties:
        data:
          type: array
          minItems: 0
          items:
            $ref: '#/components/schemas/Events'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/OpenDataMeta'
      additionalProperties: false
    ProductList:
      type: object
      description: Lista de operaciones de cambio
      required:
        - brandName
        - companyCnpj
        - operationId
      properties:
        brandName:
          type: string
          description: 'Nombre de la Marca reportada por el participante en el Open Finance. Se recomienda utilizar, siempre que sea posible, el mismo nombre de marca atribuido en el campo del directorio Customer Friendly Server Name (Authorisation Server). Institución autorizada a operar'
          pattern: '[\w\W\s]*'
          example: Organización A
          maxLength: 80
        companyCnpj:
          type: string
          description: 'Número completo del CNPJ de la institución responsable por el Registro - el CNPJ corresponde al número de inscripción en el Registro de Persona Jurídica. Debe tener solo los números del CNPJ, sin máscara.'
          maxLength: 14
          pattern: '^\d{14}$'
          example: '21128159000166'
        operationId:
          type: string
          description: 'Identifica de forma única la relación del cliente con el producto, manteniendo las reglas de inmutabilidad dentro de la institución transmisora.'
          maxLength: 100
          pattern: '^[a-zA-Z0-9][a-zA-Z0-9-]{0,99}$'
          example: '92792126019929240'
      additionalProperties: false
    OperationDetails:
      type: object
      description: Detalles de la operación de cambio.
      required:
        - authorizedInstitutionCnpjNumber
        - authorizedInstitutionName
        - operationType
        - operationDate
        - dueDate
        - localCurrencyOperationTax
        - localCurrencyOperationValue
        - foreignOperationValue
        - deliveryForeignCurrency
        - operationCategoryCode
      properties:
        authorizedInstitutionCnpjNumber:
          type: string
          description: CNPJ de la institución autorizada a operar en el mercado de cambio.
          maxLength: 14
          pattern: '^\d{14}$'
          example: '11225860000140'
        authorizedInstitutionName:
          type: string
          description: Nombre de la Institución Financiera en Brasil.
          maxLength: 250
          pattern: '[\w\W\s]*'
          example: AGENCIA CORRETORA
        intermediaryInstitutionCnpjNumber:
          type: string
          description: |
            CNPJ de la institución intermediadora autorizada a operar en el mercado de cambio. 
            Campo de envío obligatorio en los casos en que haya institución intermediadora.
          maxLength: 14
          pattern: '^\d{14}$'
          example: '11225860000140'
        intermediaryInstitutionName:
          type: string
          description: |
            Nombre de la corredora interviniente autorizada a operar en el mercado de cambio.

            [Restricción] Campo de llenado obligatorio por las participantes cuando el campo 'intermediaryInstitutionCnpjNumber' sea informado.
          maxLength: 250
          pattern: '[\w\W\s]*'
          example: AGENCIA CORRETORA
        operationNumber:
          type: string
          description: Número del registro de la operación en el Bacen. Debe ser llenado en el compartimiento, después del registro en el Sistema de Cambio y número disponible en la transmisora/detentora.
          maxLength: 12
          pattern: '^\d{12}$'
          example: '393874649456'
        operationType:
          $ref: '#/components/schemas/EnumExchangesOperationType'
        operationDate:
          type: string
          format: date-time
          description: Fecha del cierre del contrato de cambio.
          maxLength: 20
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$'
          example: '2023-03-07T08:30:00Z'
        dueDate:
          type: string
          format: date
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
          description: Fecha en que la operación (compra o venta) está prevista para ser liquidada.
          maxLength: 10
          example: "2018-02-15"
        localCurrencyOperationTax:
          type: object
          description: Valor de la tasa de cambio aplicada a este contrato, en moneda nacional.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 31
              pattern: '^\d{1,15}\.\d{1,15}$'
              example: '1.3'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        localCurrencyOperationValue:
          type: object
          description: Valor negociado en moneda nacional.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 20
              pattern: '^\d{1,17}\.\d{2}$'
              example: '1000.04'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        foreignOperationValue:
          type: object
          description: Valor de la operación en moneda extranjera.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 20
              pattern: '^\d{1,17}\.\d{2}$'
              example: '1000.04'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: USD
        operationOutstandingBalance:
          type: object
          description: Valor del saldo de la operación a liquidar en moneda extranjera. Objeto de envío obligatorio en los casos de operaciones de cambio con liquidación futura.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 20
              pattern: '^\d{1,17}\.\d{2}$'
              example: '1000.04'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        vetAmount:
          type: object
          description: Representa el costo de una operación de cambio en reales por moneda extranjera, englobando la tasa de cambio, las tarifas y tributos incidentes sobre esa operación. Campo de envío obligatorio en las operaciones de cambio spot que alcancen hasta el límite de US$100.000 o equivalente en otras monedas.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 31
              pattern: '\d{1,15}\.\d{1,15}$'
              example: '1000.000004'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        localCurrencyAdvancePercentage:
          type: string
          description: |
            Porcentaje del valor de moneda extranjera concedido al cliente anticipadamente. p.ej. 0.014500.

            El llenado debe respetar las 6 casas decimales, incluso que vengan llenadas con ceros(representación de porcentaje p.ej: 0.150000. Este valor representa 15%. El valor 1 representa 100%). Campos de envío obligatorio en el caso de operaciones de cambio con liquidación futura.
          pattern: '^\d{1}\.\d{1,6}$'
          maxLength: 8
          minLength: 3
          example: '0.12'
        deliveryForeignCurrency:
          $ref: '#/components/schemas/EnumExchangesDeliveryForeignCurrency'
        operationCategoryCode:
          type: string
          maxLength: 5
          pattern: '^\d{5}$'
          description: Código de la naturaleza hecho del cierre de la operación. Debe respetar los códigos de naturaleza referenciados en la resolución 277 o en la Circular 3690, conforme se aplique al contrato de cambio.
          example: '90302'
      additionalProperties: false
    Events:
      type: object
      description: Detalles de los eventos de la operación de cambio.
      required:
        - eventSequenceNumber
        - eventType
        - eventDate
      properties:
        eventSequenceNumber:
          type: string
          description: Número secuencia del registro del evento de cambio en el Bacen.
          maxLength: 12
          pattern: '^\d{12}$'
          example: '493874649457'
        eventType:
          $ref: '#/components/schemas/EnumExchangesEventType'
        eventDate:
          type: string
          format: date-time
          description: Fecha del evento relacionado con la operación.
          maxLength: 20
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$'
          example: '2023-03-07T08:30:00Z'
        dueDate:
          type: string
          format: date
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
          description: Fecha en que la operación (compra o venta), después de evento, está prevista para ser liquidada.
          maxLength: 10
          example: "2018-02-15"
        localCurrencyOperationTax:
          type: object
          description: Valor de la tasa de cambio aplicada a la operación, en moneda nacional.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 31
              pattern: '^\d{1,15}\.\d{1,15}$'
              example: '1.3'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        localCurrencyOperationValue:
          type: object
          description: Valor negociado en moneda nacional.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 20
              pattern: '^\d{1,17}\.\d{2}$'
              example: '1000.04'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        foreignOperationValue:
          type: object
          description: Valor de la operación en moneda extranjera.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 20
              pattern: '^\d{1,17}\.\d{2}$'
              example: '1000.04'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: USD
        operationOutstandingBalance:
          type: object
          description: Valor del saldo de la operación a liquidar en moneda extranjera. Objeto de envío obligatorio para eventos creados (eventDate) a partir de 15/04/2024 en los casos de operaciones de cambio con liquidación futura.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 20
              pattern: '^\d{1,17}\.\d{2}$'
              example: '1000.04'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        vetAmount:
          type: object
          description: Representa el costo de una operación de cambio en reales por moneda extranjera, englobando la tasa de cambio, las tarifas y tributos incidentes sobre esa operación. Campo de envío obligatorio en las operaciones de cambio spot que alcancen hasta el límite de US$100.000 o equivalente en otras monedas.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado al objeto.
              maxLength: 31
              pattern: '\d{1,15}\.\d{1,15}$'
              example: '1000.000004'
            currency:
              type: string
              description: Moneda referente al valor monetario, siguiendo el modelo ISO-4217.
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        localCurrencyAdvancePercentage:
          type: string
          description: |
            Porcentaje del valor de moneda extranjera concedido al cliente anticipadamente. p.ej. 0.014500.

            El llenado debe respetar las 6 casas decimales, incluso que vengan llenadas con ceros(representación de porcentaje p.ej: 0.150000. Este valor representa 15%. El valor 1 representa 100%). Campos de envío obligatorio en el caso de operaciones de cambio con liquidación futura.
          pattern: '^\d{1}\.\d{1,6}$'
          maxLength: 8
          minLength: 3
          example: '0.12'
        deliveryForeignCurrency:
          $ref: '#/components/schemas/EnumExchangesDeliveryForeignCurrency'
        operationCategoryCode:
          type: string
          maxLength: 5
          pattern: '^\d{5}$'
          description: Código de la naturaleza hecho del cierre de la operación. Debe respetar los códigos de naturaleza referenciados en la resolución 277 o en la Circular 3690, conforme se aplique al contrato de cambio.
          example: '90302'
        foreignPartie:
          type: object
          required:
            - relationshipCode
            - foreignPartieName
            - foreignPartieCountryCode
          description: |
            Lista para envío de informaciones de parte involucrada.
            
            [Restricción] Lista de llenado opcional por las participantes cuando:
            - El campo `deliveryForeignCurrency` sea igual a ESPECIE_CHEQUES_VIAGEM o CARTAO_PREPAGO.
            - El campo `eventType` sea diferente de "4 - Liquidação de Operação Cambial no Mercado Primário."

            Caso la institución posea la información, ella es de envío obligatorio. Caso la información sea actualizada
            posteriormente a la contratación, ella debe ser enviada a través de eventos.
          properties:
            relationshipCode:
              type: string
              maxLength: 2
              pattern: '^\d{2}$'
              description: |
                Código de Relación de vínculo entre el Cliente y el Pagador/Recebedor en el Exterior. Debe respetar los códigos de vínculo referenciados en la resolución 277 o en la Circular 3690, conforme se aplique al contrato de cambio.
              example: '50'
            foreignPartieName:
              type: string
              description: |
                Nombre del pagador o recebedor en el exterior.
              maxLength: 80
              pattern: '[\w\W\s]*'
              example: José da Silva
            foreignPartieCountryCode:
              type: string
              description: |
                País del pagador o recebedor. Código del país según la norma ISO 3166-1.
              maxLength: 2
              pattern: '^[A-Z]{2}$'
              example: ZA
      additionalProperties: false
    EnumExchangesOperationType:
      type: string
      description: Compra o venta de moneda extranjera.
      enum:
        - COMPRA
        - VENDA
      example: COMPRA
    EnumExchangesEventType:
      type: string
      description: |
        Para el campo dominio:

        1 - Contratación en el Mercado Primario.  
        2 - Alteración de Operación Cambiaria en el Mercado Primario.  
        3 - Cancelación de Operación Cambiaria en el Mercado Primario.  
        4 - Liquidación de Operación Cambiaria en el Mercado Primario.  
        5 - Baja de Valor a Liquidar de Operación Cambiaria en el Mercado Primario.  
        6 - Restablecimiento de Baja de Valor a Liquidar de Operación Cambiaria en el Mercado Primario.  
        9 - Anulación de Operación Cambiaria en el Mercado Primario (utilizado, por ejemplo, en la anulación de un evento de liquidación/cancelación).  
        Obs.: Códigos siguen el layout de mensajería enviada por las instituciones al Banco Central.  

        El evento está relacionado al tipo de contratación.
      enum:
        - '1'
        - '2'
        - '3'
        - '4'
        - '5'
        - '6'
        - '9'
      example: '2'
    EnumExchangesDeliveryForeignCurrency:
      type: string
      description: |
        Forma de entrega de la moneda extranjera.

        ```
        |--------|-------------------------------------------------------------|
        | Código | ENUM                                                        |
        |--------|-------------------------------------------------------------|
        |   10   | CARTA_CREDITO_A_VISTA                                       |
        |   15   | CARTA_CREDITO_A_PRAZO                                       |
        |   20   | CONTA_DEPOSITO                                              |
        |   21   | CONTA_DEPOSITO_MOEDA_ESTRANGEIRA_PAIS                       |
        |   22   | CONTA_DEPOSITO_EXPORTADOR_MANTIDA_NO_EXTERIOR               |
        |   23   | CONTA_DEPOSITO_OU_PAGAMENTO_EXPORTADOR_INSTITUICAO_EXTERIOR |
        |   25   | CONVENIO_PAGAMENTOS_E_CREDITOS_RECIPROCOS                   |
        |   30   | CHEQUE                                                      |
        |   50   | ESPECIE_CHEQUES_VIAGEM                                      |
        |   55   | CARTAO_PREPAGO                                              |
        |   65   | TELETRANSMISSAO                                             |
        |   75   | TITULOS_VALORES                                             |
        |   90   | SIMBOLICA                                                   |
        |   91   | SEM_MOVIMENTACAO_VALORES                                    |
        |   99   | DEMAIS                                                      |
        |   N/A  | OUTRO_NAO_MAPEADO_OFB                                       |
        |--------|-------------------------------------------------------------|
        ```
      enum:
        - CONTA_DEPOSITO_MOEDA_ESTRANGEIRA_PAIS
        - CONTA_DEPOSITO_OU_PAGAMENTO_EXPORTADOR_INSTITUICAO_EXTERIOR
        - ESPECIE_CHEQUES_VIAGEM
        - CARTAO_PREPAGO
        - TELETRANSMISSAO
        - SEM_MOVIMENTACAO_VALORES
        - DEMAIS
        - CARTA_CREDITO_A_VISTA
        - CARTA_CREDITO_A_PRAZO
        - CONTA_DEPOSITO
        - CHEQUE
        - TITULOS_VALORES
        - SIMBOLICA
        - CONTA_DEPOSITO_EXPORTADOR_MANTIDA_NO_EXTERIOR
        - CONVENIO_PAGAMENTOS_E_CREDITOS_RECIPROCOS
        - OUTRO_NAO_MAPEADO_OFB
      example: CARTA_CREDITO_A_PRAZO
    ResponseErrorWithAbleAdditionalProperties:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          minItems: 1
          maxItems: 13
          items:
            type: object
            required:
              - code
              - title
              - detail
            properties:
              code:
                description: Código de error específico del endpoint
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 255
              title:
                description: Título legible por humanos de este error específico
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 255
              detail:
                description: Descripción legible por humanos de este error específico
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 2048
        meta:
          $ref: '#/components/schemas/MetaWithAbleAdditionalProperties'
    MetaWithAbleAdditionalProperties:
      type: object
      description: Meta informaciones referente a la API solicitada.
      required:
        - requestDateTime
      properties:
        requestDateTime:
          description: 'Fecha y hora de la consulta, conforme especificación RFC-3339, formato UTC.'
          type: string
          maxLength: 20
          format: date-time
          example: '2021-05-21T08:30:00Z'
  parameters:
    OperationId:
      name: operationId
      in: path
      description: 'Identifica de forma única la relación del cliente con el producto, manteniendo las reglas de inmutabilidad dentro de la institución transmisora.'
      required: true
      schema:
        type: string
        pattern: '^[a-zA-Z0-9][a-zA-Z0-9\-]{0,99}$'
        maxLength: 100
        example: '92792126019929200000000000000000000000000'
    SetupID:
      name: setupId
      in: header
      description: |
          El SetupUUID es el identificador único en el ODR (GUID).  
          Deberá ser usado para realizar todas las otras llamadas en el ODR, como búsqueda de cuentas, transacciones, etc.
      required: true
      schema:
        type: string
        format: uuid
        example: '550e8400-e29b-41d4-a716-446655440000' 
    xFapiAuthDate:
      name: x-fapi-auth-date
      in: header
      description: 'Fecha en que el usuario inició sesión por última vez con el receptor. Representada de acuerdo con la RFC7231. Ejemplo: Sun, 10 Sep 2017 19:43:31 UTC.'
      required: false
      schema:
        type: string
        pattern: '^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d{4} \d{2}:\d{2}:\d{2} (GMT|UTC)$'
        minLength: 29
        maxLength: 29
    xFapiCustomerIpAddress:
      name: x-fapi-customer-ip-address
      in: header
      description: La dirección IP del usuario si está actualmente conectado con el receptor.
      required: false
      schema:
        type: string
        pattern: '[\w\W\s]*'
        minLength: 1
        maxLength: 100
    xFapiInteractionId:
      name: x-fapi-interaction-id
      in: header
      description: Un UUID [RFC4122](https://tools.ietf.org/html/rfc4122) usado como un ID de correlación entre request y response. Campo de generación y envío obligatorio por la receptora (client) y su valor debe ser "reflejado" por la transmisora (server) en el encabezado de respuesta. Caso no sea recibido o si es recibido un valor inválido, la transmisora debe generar un x-fapi-interaction-id y retornarlo en la respuesta con el HTTP Status Code 400. La receptora debe acatar el valor recibido de la transmisora.
      required: false
      schema:
        type: string
        format: uuid
        minLength: 1
        maxLength: 36
        pattern: ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$
        example: d78fc4e5-37ca-4da3-adf2-9b082bf92280
    xCustomerUserAgent:
      name: x-customer-user-agent
      in: header
      description: Indica el user-agent que el usuario utiliza.
      required: false
      schema:
        type: string
        pattern: '[\w\W\s]*'
        minLength: 1
        maxLength: 100
    page:
      name: page
      in: query
      description: Número de la página que está siendo solicitada (el valor de la primera página es 1).
      schema:
        type: integer
        default: 1
        minimum: 1
        maximum: 2147483647 
        format: int32
    pageSize:
      name: page-size
      in: query
      description: |
        Cantidad total de registros por páginas. 
        La transmisora debe considerar entrada como 25, caso sea informado algún valor menor por la receptora. 
        Mientras haya más que 25 registros a enviar, la transmisora debe considerar el mínimo por página como 25. 
        Solamente la última página retornada (o primera, en el caso de página única) puede contener menos de 25 registros. 
        Más informaciones, acceda Especificaciones de APIs > Estándares > Paginación.
      schema:
        type: integer
        default: 25
        minimum: 25
        format: int32
        maximum: 1000
    pagination-key:
      name: pagination-key
      in: query
      description: Identificador de relamada, utilizado para evitar el conteo de llamadas al endpoint durante la paginación.
      schema:
        type: string
        maxLength: 2048
        pattern: '[\w\W\s]*'
  securitySchemes:
    OAuth2AuthorizationCode:
      type: oauth2
      description: Flujo OAuth necesario para que la receptora tenga acceso a los datos en la institución transmisora. Requiere el proceso de redireccionamiento y autenticación del usuario al que se refieren los datos.
      flows:
        authorizationCode:
          authorizationUrl: 'https://authserver.example/authorization'
          tokenUrl: 'https://authserver.example/token'
          scopes:
            exchanges: Alcance necesario para acceso a la API exchanges. El control de los endpoints específicos es hecho vía permissions.
  responses:
    OKResponseProductList:
      description: Datos de operaciones de cambio de la institución obtenidos con éxito.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OKResponseProductList'
    OKResponseOperationDetails:
      description: Datos de operaciones de cambio de la institución obtenidos con éxito.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OKResponseOperationDetails'
    OKResponseEvents:
      description: Datos de operaciones de cambio de la institución obtenidos con éxito.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OKResponseEvents'
    BadRequestWithAdditionalProperties:
      description: 'La solicitud fue malformada, omitiendo atributos obligatorios, sea en el payload o a través de atributos en la URL.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    ForbiddenWithAdditionalProperties:
      description: El token tiene alcance incorrecto o una política de seguridad fue violada
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    InternalServerErrorWithAdditionalProperties:
      description: Ocurrió un error en el gateway de la API o en el microservicio
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    LockedWithAdditionalProperties:
      description: Locked
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    MethodNotAllowedWithAdditionalProperties:
      description: El consumidor intentó acceder al recurso con un método no soportado
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    NotAcceptableWithAdditionalProperties:
      description: La solicitud contenía un encabezado Accept diferente de los tipos de medio permitidos o un conjunto de caracteres diferente de UTF-8
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    NotFoundWithAdditionalProperties:
      description: El recurso solicitado no existe o no fue implementado
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    TooManyRequestsWithAdditionalProperties:
      description: 'La operación fue rechazada, pues muchas solicitudes fueron hechas dentro de un determinado período o el límite global de solicitudes concurrentes fue alcanzado'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    UnauthorizedWithAdditionalProperties:
      description: Encabezado de autenticación ausente/inválido o token inválido
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    UnprocessableEntityWithAdditionalProperties:
      description: 'La sintaxis de la solicitud está correcta, pero no fue posible procesar las instrucciones presentes.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'