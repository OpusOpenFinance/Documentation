openapi: 3.0.0
info:
  title: API Funds - Integration Layer - OPUS Open Finance Brasil
  description: |
    API de informações de operações de Fundos de Investimento Open Finance Brasil – Fase 4. 
    API que retorna informações de operações de investimento do tipo Fundos de Investimento mantidas nas instituições transmissoras por seus clientes, incluindo dados como informações do produto, quantidade, saldos em posição do cliente e movimentações financeiras. 
    Não possui segregação entre pessoa natural e pessoa jurídica.
    Devem ser considerados como escopo de exposição todos os fundos de investimento classificados como: Renda Fixa, Ações, Multimercado e Cambial. 
    Para identificação do produto e posição do cliente, a exposição será de forma consolidada por Fundo de Investimento. 
    Para movimentações, a exposição se dará pela Ordem do Cliente, por exemplo, uma Ordem de Resgate é compartilhada como uma única movimentação, mesmo que esteja associada a diferentes Certificados (Cautelas).

    As instituições podem apresentar cenários distintos no que diz respeito ao sincronismo entre posição `/balances` e movimentação `/transactions` e `/transactions-current` da API:

    - Algumas instituições refletem movimentações ainda não convertidas na posição do cliente em seus canais eletrônicos. Isso implica que pode ocorrer compartilhamento de posição atualizada, cujas movimentações relacionadas serão expostas no ecossistema apenas após a conversão das mesmas;

    - Outras instituições refletem na posição apenas movimentações convertidas nos seus canais eletrônicos. Isso implica que o compartilhamento da posição em relação às movimentações é feito de forma sincronizada no ecossistema.

    Para o identificador do investimento (investmentId) deve ser adotado o seguinte comportamento:

    - Após 12 meses sem movimentações e com quantidade de ativos zerada, o resourceId correspondente ao investmentId em questão deve passar ao status UNAVAILABLE (considerando consentimento válido);
  version: 4.0.0-rc.1-base1.0.2
  license:
    name: Apache 2.0
    url: 'https://www.apache.org/licenses/LICENSE-2.0'
tags:
  - name: Product List
    description: Obtém a lista de operações de Fundos de Investimento mantidas pelo cliente na instituição transmissora.
  - name: Product Identification
    description: Obtém os dados da operação de Fundos de Investimento identificada por investmentId.
  - name: Balances
    description: Obtém a posição da operação de Fundos de Investimento identificada por investmentId.
  - name: Transactions
    description: Obtém as movimentações históricas (últimos 12 meses) da operação de Fundos de Investimento identificada por investmentId.
  - name: Transactions Current
    description: 'Obtém as movimentações recentes da operação de Fundos de Investimento identificada por investmentId. O período a ser considerado para apresentação de movimentações será de até 7 dias - 7 dias anteriores da consulta, incluindo o dia da consulta (D-6).'
paths:
  /discovery:
    post:
      tags:
        - Product List
      summary: Obtém uma lista de recursos representando todos os investimentos do tipo Fundos de Investimento realizados pelo cliente.
      operationId: discoverFunds
      description: Método para obter a lista de investimentos do tipo Fundos de Investimento realizados pelo cliente na instituição transmissora.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestWithConsentAndRequestMeta'
      responses:
        '200':
          $ref: '#/components/responses/OKResponseFundDiscovery'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '405':
          $ref: '#/components/responses/MethodNotAllowed'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '423':
          $ref: '#/components/responses/Locked'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
        '504':
          $ref: '#/components/responses/GatewayTimeout'
        '529':
          $ref: '#/components/responses/SiteIsOverloaded'
        default:
          $ref: '#/components/responses/Default'
  /investments:
    post:
      tags:
        - Product List
      summary: Obtém a lista de operações de Fundos de Investimento mantidas pelo cliente na instituição transmissora e para as quais ele tenha fornecido consentimento.
      operationId: fundsGetInvestments
      description: Obtém a lista de operações de Fundos de Investimento mantidas pelo cliente na instituição transmissora e para as quais ele tenha fornecido consentimento.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestWithConsentAndRequestMetaAndPagination'
      responses:
        '200':
          $ref: '#/components/responses/OkResponseFundsProductList'
        '400':
          $ref: '#/components/responses/BadRequestWithAdditionalProperties'
        '401':
          $ref: '#/components/responses/UnauthorizedWithAdditionalProperties'
        '403':
          $ref: '#/components/responses/ForbiddenWithAdditionalProperties'
        '404':
          $ref: '#/components/responses/NotFoundWithAdditionalProperties'
        '405':
          $ref: '#/components/responses/MethodNotAllowedWithAdditionalProperties'
        '406':
          $ref: '#/components/responses/NotAcceptableWithAdditionalProperties'
        '422':
          $ref: '#/components/responses/UnprocessableEntityWithAdditionalProperties'
        '423':
          $ref: '#/components/responses/LockedWithAdditionalProperties'
        '429':
          $ref: '#/components/responses/TooManyRequestsWithAdditionalProperties'
        '500':
          $ref: '#/components/responses/InternalServerErrorWithAdditionalProperties'
        '504':
          $ref: '#/components/responses/GatewayTimeoutWithAdditionalProperties'
        '529':
          $ref: '#/components/responses/SiteIsOverloadedWithAdditionalProperties'
        default:
          $ref: '#/components/responses/DefaultWithAdditionalProperties'
  /find:
    post:
      tags:
        - Product Identification
      summary: Obtém os dados da operação de Fundos de Investimento identificada por investmentId.
      operationId: fundsGetInvestmentsInvestmentId
      description: Obtém os dados da operação de Fundos de Investimento identificada por investmentId.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestWithConsentAndRequestMetaAndInvestmentId'
      responses:
        '200':
          $ref: '#/components/responses/OkResponseFundsProductIdentification'
        '400':
          $ref: '#/components/responses/BadRequestWithAdditionalProperties'
        '401':
          $ref: '#/components/responses/UnauthorizedWithAdditionalProperties'
        '403':
          $ref: '#/components/responses/ForbiddenWithAdditionalProperties'
        '404':
          $ref: '#/components/responses/NotFoundWithAdditionalProperties'
        '405':
          $ref: '#/components/responses/MethodNotAllowedWithAdditionalProperties'
        '406':
          $ref: '#/components/responses/NotAcceptableWithAdditionalProperties'
        '422':
          $ref: '#/components/responses/UnprocessableEntityWithAdditionalProperties'
        '423':
          $ref: '#/components/responses/LockedWithAdditionalProperties'
        '429':
          $ref: '#/components/responses/TooManyRequestsWithAdditionalProperties'
        '500':
          $ref: '#/components/responses/InternalServerErrorWithAdditionalProperties'
        '504':
          $ref: '#/components/responses/GatewayTimeoutWithAdditionalProperties'
        '529':
          $ref: '#/components/responses/SiteIsOverloadedWithAdditionalProperties'
        default:
          $ref: '#/components/responses/DefaultWithAdditionalProperties'
  /balances:
    post:
      tags:
        - Balances
      summary: Obtém a posição da operação de Fundos de Investimento identificada por investmentId.
      operationId: fundsGetInvestmentsInvestmentIdBalances
      description: |
        Obtém a posição da operação de Fundos de Investimento identificada por investmentId.

        Nos casos em que não houver posição para o investimento, ou seja, quantidade de ativos e valores monetários zerados, mas o mesmo ainda estiver no prazo de exposição (até 12 meses após a última movimentação), deve se retornar status code 200 e para o payload de retorno considerar os valores abaixo. Campos não obrigatórios não devem ser retornados: 

        - Valores monetários: 0.00
        - Quantidade de ativos: 0.00
        - Data da última posição: mesmo conteúdo (data) do campo requestDateTime, com exceção da fração correspondente ao horário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestWithConsentAndRequestMetaAndInvestmentId'
      responses:
        '200':
          $ref: '#/components/responses/ResponseFundsBalances'
        '400':
          $ref: '#/components/responses/BadRequestWithAdditionalProperties'
        '401':
          $ref: '#/components/responses/UnauthorizedWithAdditionalProperties'
        '403':
          $ref: '#/components/responses/ForbiddenWithAdditionalProperties'
        '404':
          $ref: '#/components/responses/NotFoundWithAdditionalProperties'
        '405':
          $ref: '#/components/responses/MethodNotAllowedWithAdditionalProperties'
        '406':
          $ref: '#/components/responses/NotAcceptableWithAdditionalProperties'
        '422':
          $ref: '#/components/responses/UnprocessableEntityWithAdditionalProperties'
        '423':
          $ref: '#/components/responses/LockedWithAdditionalProperties'
        '429':
          $ref: '#/components/responses/TooManyRequestsWithAdditionalProperties'
        '500':
          $ref: '#/components/responses/InternalServerErrorWithAdditionalProperties'
        '504':
          $ref: '#/components/responses/GatewayTimeoutWithAdditionalProperties'
        '529':
          $ref: '#/components/responses/SiteIsOverloadedWithAdditionalProperties'
        default:
          $ref: '#/components/responses/DefaultWithAdditionalProperties'
  /transactions:
    post:
      tags:
        - Transactions
      summary: Obtém as movimentações históricas (últimos 12 meses) da operação de Fundos de Investimento identificada por investmentId.
      operationId: fundsGetInvestmentsInvestmentIdTransactions
      description: Obtém as movimentações históricas (últimos 12 meses) da operação de Fundos de Investimento identificada por investmentId.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestTransactions'
      responses:
        '200':
          $ref: '#/components/responses/OKResponseFundsTransactions'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '405':
          $ref: '#/components/responses/MethodNotAllowed'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '423':
          $ref: '#/components/responses/Locked'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
        '504':
          $ref: '#/components/responses/GatewayTimeout'
        '529':
          $ref: '#/components/responses/SiteIsOverloaded'
        default:
          $ref: '#/components/responses/Default'
  /transactions-current:
    post:
      tags:
        - Transactions Current
      summary: 'Obtém as movimentações recentes da operação de Fundos de Investimento identificada por investmentId. O período a ser considerado para apresentação de movimentações será de até 7 dias - 7 dias anteriores da consulta, incluindo o dia da consulta (D-6).'
      operationId: fundsGetInvestmentsInvestmentIdTransactionsCurrent
      description: 'Obtém as movimentações recentes da operação de Fundos de Investimento identificada por investmentId. O período a ser considerado para apresentação de movimentações será de até 7 dias - 7 dias anteriores da consulta, incluindo o dia da consulta (D-6).'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestTransactionsCurrent'
      responses:
        '200':
          $ref: '#/components/responses/OKResponseFundsTransactionsCurrent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '405':
          $ref: '#/components/responses/MethodNotAllowed'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '423':
          $ref: '#/components/responses/Locked'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
        '504':
          $ref: '#/components/responses/GatewayTimeout'
        '529':
          $ref: '#/components/responses/SiteIsOverloaded'
        default:
          $ref: '#/components/responses/Default'
components:
  schemas:
    ResponseFundsProductList:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          minItems: 0
          items:
            $ref: '#/components/schemas/ResponseFundsProductListData'
        meta:
          $ref: '#/components/schemas/FundsMeta'
      additionalProperties: false
    ResponseFundsProductIdentification:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/ResponseFundsProductIdentificationData'
        meta:
          $ref: '#/components/schemas/FundsMeta'
      additionalProperties: false
    ResponseFundsBalances:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/ResponseFundsBalanceData'
        meta:
          $ref: '#/components/schemas/FundsMeta'
      additionalProperties: false
    ResponseFundsTransactions:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          minItems: 0
          items:
            $ref: '#/components/schemas/ResponseFundsTransactionsData'
        meta:
          $ref: '#/components/schemas/MetaOnlyRequestDateTimeAndHasMoreRecords'
      additionalProperties: false
    ResponseFundsTransactionsCurrent:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          minItems: 0
          items:
            $ref: '#/components/schemas/ResponseFundsTransactionsCurrentData'
        meta:
          $ref: '#/components/schemas/MetaOnlyRequestDateTimeAndHasMoreRecords'
      additionalProperties: false
    ResponseFundsProductListData:
      type: object
      description: Lista de fundos de investimento mantidos pelo cliente na instituição transmissora e para as quais ele tenha fornecido consentimento.
      required:
        - brandName
        - companyCnpj
        - investmentId
      properties:
        brandName:
          type: string
          description: 'Nome da Marca reportada pelo participante no Open Finance. Recomenda-se utilizar, sempre que possível, o mesmo nome de marca atribuído no campo do diretório Customer Friendly Server Name (Authorisation Server).'
          pattern: '[\w\W\s]*'
          example: Organização A
          maxLength: 80
        companyCnpj:
          type: string
          description: 'Número completo do CNPJ da instituição responsável pelo Cadastro - o CNPJ corresponde ao número de inscrição no Cadastro de Pessoa Jurídica. Deve-se ter apenas os números do CNPJ, sem máscara.'
          maxLength: 14
          pattern: '^\d{14}$'
          example: '21128159000166'
        anbimaCategory:
          type: string
          description: |
            Conforme classificação ANBIMA, que segue a deliberação 77 da ANBIMA.

            – Renda Fixa

            – Ações

            – Multimercado

            – Cambial

            https://www.anbima.com.br/data/files/5A/44/2C/B7/8411B510CD3B4DA568A80AC2/DeliberacaoN77-Diretriz-de-Classificacao-de-Fundos.pdf
          enum:
            - RENDA_FIXA
            - ACOES
            - MULTIMERCADO
            - CAMBIAL
          example: RENDA_FIXA
        anbimaClass:
          type: string
          description: Campo necessário para aderência a Resolução CVM175. Aguardando definições de mercado. Deve se tratar de campo do tipo enum.
          maxLength: 70
          pattern: '[\w\W\s]*'
        anbimaSubclass:
          type: string
          description: Campo necessário para aderência a Resolução CVM175. Aguardando definições de mercado. Deve se tratar de campo do tipo enum.
          maxLength: 70
          pattern: '[\w\W\s]*'
        investmentId:
          $ref: '#/components/schemas/LegacyId'
      additionalProperties: false
    ResponseFundsProductIdentificationData:
      type: object
      description: Informações do produto de fundo de investimento a que se refere investmentId.
      required:
        - name
        - cnpjNumber
      properties:
        name:
          type: string
          description: Nome oficial do fundo de investimento conforme exibido para os clientes nos canais eletrônicos.
          maxLength: 250
          example: CONSTELLATION MASTER FIA
        cnpjNumber:
          type: string
          description: CNPJ do fundo de investimento.
          maxLength: 14
          pattern: '^\d{14}$'
          example: '11225860000140'
        isinCode:
          type: string
          description: |
            Código universal que identifica cada valor mobiliário ou instrumento financeiro, conforme Norma ISO 6166.

            DEFINIÇÃO: O ISIN (International Securities Identification Number) é um código que identifica um valor mobiliário, conforme a norma ISO 6166.

            ESTRUTURA: O ISIN é um código alfanumérico que possui 12 caracteres com a seguinte estrutura:  
            - Um prefixo, composto de 2 caracteres alfa, que identifica o código do país (Norma ISO 3166);
            - O número básico, composto de 9 caracteres alfabéticos ou numéricos em sua extensão;
            - Um dígito numérico de controle.
          maxLength: 12
          minLength: 12
          pattern: '^[A-Z]{2}([A-Z0-9]){9}\d{1}$'
          example: BRCST4CTF001
        anbimaCategory:
          type: string
          description: |
            Conforme classificação ANBIMA, que segue a deliberação 77 da ANBIMA.

            – Renda Fixa

            – Ações

            – Multimercado

            – Cambial

            https://www.anbima.com.br/data/files/5A/44/2C/B7/8411B510CD3B4DA568A80AC2/DeliberacaoN77-Diretriz-de-Classificacao-de-Fundos.pdf
          enum:
            - RENDA_FIXA
            - ACOES
            - MULTIMERCADO
            - CAMBIAL
          example: RENDA_FIXA
        anbimaClass:
          type: string
          description: Campo necessário para aderência a Resolução CVM175. Aguardando definições de mercado. Deve se tratar de campo do tipo enum.
          maxLength: 70
          pattern: '[\w\W\s]*'
        anbimaSubclass:
          type: string
          description: Campo necessário para aderência a Resolução CVM175. Aguardando definições de mercado. Deve se tratar de campo do tipo enum.
          maxLength: 70
          pattern: '[\w\W\s]*'
      additionalProperties: false
    ResponseFundsBalanceData:
      type: object
      description: Informações da posição do fundo de investimento a que se refere investmentId.
      required:
        - referenceDate
        - grossAmount
        - netAmount
        - incomeTaxProvision
        - financialTransactionTaxProvision
        - blockedAmount
        - quotaQuantity
        - quotaGrossPriceValue
      properties:
        referenceDate:
          type: string
          format: date
          description: Data da última posição consolidada disponível a que se referem os dados transacionais do cliente disponíveis nos canais eletrônicos.
          maxLength: 10
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
          example: '2023-01-07'
        grossAmount:
          $ref: '#/components/schemas/FundsBalancesGrossAmount'
        netAmount:
          $ref: '#/components/schemas/FundsBalancesNetAmount'
        incomeTaxProvision:
          $ref: '#/components/schemas/FundsBalancesIncomeTaxProvision'
        financialTransactionTaxProvision:
          $ref: '#/components/schemas/FundsBalancesFinancialTransactionTaxProvision'
        blockedAmount:
          $ref: '#/components/schemas/FundsBalancesBlockedAmount'
        quotaQuantity:
          type: string
          format: double
          description: Quantidade de cotas detidas em posição do cliente .
          pattern: '^\d{1,15}\.\d{2,8}$'
          maxLength: 24
          example: '42.25'
        quotaGrossPriceValue:
          $ref: '#/components/schemas/FundsBalancesQuotaGrossPriceValue'
    ResponseFundsTransactionsData:
      type: object
      description: Informações da posição do fundo de investimento a que se refere investmentId.
      required:
        - transactionId
        - type
        - transactionType
        - transactionConversionDate
        - transactionQuotaPrice
        - transactionQuotaQuantity
        - transactionValue
        - transactionGrossValue
      properties:
        transactionId:
          $ref: '#/components/schemas/LegacyId'
        type:
          $ref: '#/components/schemas/EnumFundsTransactionsType'
        transactionType:
          $ref: '#/components/schemas/EnumFundsTransactionsTransactionType'
        transactionTypeAdditionalInfo:
          type: string
          description: |
            Informação adicional do tipo do motivo, para preenchimento no caso de movimentações não delimitadas no domínio.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'transactionType' for preenchido com o valor 'OUTROS'.
          maxLength: 100
          pattern: '[\w\W\s]*'
        transactionConversionDate:
          type: string
          format: date
          description: Data da conversão da transação de movimentação do fundo de investimento.
          maxLength: 10
          minLength: 10
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
          example: '2023-01-07'
        transactionQuotaPrice:
          type: object
          description: |
            É o valor da cota utilizada na conversão para a realização da movimentação do cliente no fundo, conforme a regra prevista em regulamento - valor pode ser negativo.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 25
              pattern: '^-?\d{1,15}\.\d{2,8}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionQuotaQuantity:
          type: string
          format: double
          description: |
            Número de cotas convertidas na data da movimentação.
          maxLength: 24
          pattern: '^\d{1,15}\.\d{2,8}$'
          example: '42.25'
        transactionValue:
          type: object
          description: Valor solicitado pelo cliente.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionGrossValue:
          type: object
          description: |
            Valor da movimentação que se refere a quantidade da cota x valor da cota da movimentação.   
            Nos casos em que não houver movimentação de cotas, por exemplo: amortização, não considerar a regra descrita.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        incomeTax:
          type: object
          description: |
            Valor do Imposto de Renda (IR) retido na fonte considerando a alíquota vigente na data da movimentação.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        financialTransactionTax:
          type: object
          description: |
            Valor do Imposto sobre Operações Financeiras (IOF) retido na fonte considerando a alíquota vigente na data da movimentação.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionExitFee:
          type: object
          description: |
            Valor da taxa de saída considerado na movimentação.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 20
              pattern: '^\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionNetValue:
          type: object
          description: |
            Valor líquido da movimentação posterior à dedução de impostos (IOF e IR) e taxa de saída.   
            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
      additionalProperties: false
    ResponseFundsTransactionsCurrentData:
      type: object
      description: Informações da posição do fundo de investimento a que se refere investmentId.
      required:
        - transactionId
        - type
        - transactionType
        - transactionConversionDate
        - transactionQuotaPrice
        - transactionQuotaQuantity
        - transactionValue
        - transactionGrossValue
      properties:
        transactionId:
          $ref: '#/components/schemas/LegacyId'
        type:
          $ref: '#/components/schemas/EnumFundsTransactionsCurrentType'
        transactionType:
          $ref: '#/components/schemas/EnumFundsTransactionsCurrentTransactionType'
        transactionTypeAdditionalInfo:
          type: string
          description: |
            Informação adicional do tipo do motivo, para preenchimento no caso de movimentações não delimitadas no domínio.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'transactionType' for preenchido com o valor 'OUTROS'.
          maxLength: 100
          pattern: '[\w\W\s]*'
        transactionConversionDate:
          type: string
          format: date
          description: Data da conversão da transação de movimentação do fundo de investimento.
          maxLength: 10
          minLength: 10
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$'
          example: '2023-01-07'
        transactionQuotaPrice:
          type: object
          description: |
            É o valor da cota utilizada na conversão para a realização da movimentação do cliente no fundo, conforme a regra prevista em regulamento - valor pode ser negativo.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 25
              pattern: '^-?\d{1,15}\.\d{2,8}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionQuotaQuantity:
          type: string
          format: double
          description: |
            Número de cotas convertidas na data da movimentação.
          maxLength: 24
          pattern: '^\d{1,15}\.\d{2,8}$'
          example: '42.25'
        transactionValue:
          type: object
          description: Valor solicitado pelo cliente.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionGrossValue:
          type: object
          description: |
            Valor da movimentação que se refere a quantidade da cota x valor da cota da movimentação.   
            Nos casos em que não houver movimentação de cotas, por exemplo: amortização, não considerar a regra descrita.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        incomeTax:
          type: object
          description: |
            Valor do Imposto de Renda (IR) retido na fonte considerando a alíquota vigente na data da movimentação.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        financialTransactionTax:
          type: object
          description: |
            Valor do Imposto sobre Operações Financeiras (IOF) retido na fonte considerando a alíquota vigente na data da movimentação.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionExitFee:
          type: object
          description: |
            Valor da taxa de saída considerado na movimentação.

            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 20
              pattern: '^\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
        transactionNetValue:
          type: object
          description: |
            Valor líquido da movimentação posterior à dedução de impostos (IOF e IR) e taxa de saída.   
            [Restrição] Campo de preenchimento obrigatório pelas participantes quando o campo 'type' for preenchido com o valor 'SAIDA'.
          required:
            - amount
            - currency
          properties:
            amount:
              type: string
              format: double
              description: Valor relacionado ao objeto.
              maxLength: 21
              pattern: '^-?\d{1,15}\.\d{2,4}$'
              example: '1000.04'
            currency:
              type: string
              description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
              pattern: '^[A-Z]{3}$'
              maxLength: 3
              example: BRL
      additionalProperties: false
    FundsMeta:
      type: object
      description: Meta informações referente a API requisitada.
      required:
        - totalRecords
        - totalPages
        - requestDateTime
      properties:
        totalRecords:
          type: integer
          format: int32
          description: Número total de registros no resultado
          example: 1
        totalPages:
          type: integer
          format: int32
          description: Número total de páginas no resultado
          example: 1
        requestDateTime:
          description: 'Data e hora da consulta, conforme especificação RFC-3339, formato UTC.'
          type: string
          maxLength: 20
          format: date-time
          example: '2021-05-21T08:30:00Z'
      additionalProperties: false
    FundsBalancesBlockedAmount:
      type: object
      description: Valor não disponível para movimentação naquele momento por qualquer motivo (bloqueio judicial, bloqueio em garantia, entre outros). Prazo de carência não é considerado como bloqueio.
      required:
        - amount
        - currency
      properties:
        amount:
          type: string
          format: double
          description: Valor relacionado ao objeto.
          pattern: '^-?\d{1,15}\.\d{2,4}$'
          maxLength: 21
          example: '1000.04'
        currency:
          type: string
          description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
          pattern: '^[A-Z]{3}$'
          maxLength: 3
          example: BRL
    FundsBalancesFinancialTransactionTaxProvision:
      type: object
      description: Valor do imposto considerando a alíquota vigente na data de referência.
      required:
        - amount
        - currency
      properties:
        amount:
          type: string
          format: double
          description: Valor relacionado ao objeto.
          pattern: '^\d{1,15}\.\d{2,4}$'
          maxLength: 20
          example: '50.02'
        currency:
          type: string
          description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
          pattern: '^[A-Z]{3}$'
          maxLength: 3
          example: BRL
    FundsBalancesGrossAmount:
      type: object
      description: 'Valor do investimento que se refere a quantidade da cota x valor da cota, atualizado na data de referência.'
      required:
        - amount
        - currency
      properties:
        amount:
          type: string
          format: double
          description: Valor relacionado ao objeto.
          pattern: '^-?\d{1,15}\.\d{2,4}$'
          maxLength: 21
          example: '1000.04'
        currency:
          type: string
          description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
          pattern: '^[A-Z]{3}$'
          maxLength: 3
          example: BRL
    FundsBalancesIncomeTaxProvision:
      type: object
      description: Valor do imposto de renda provisionado considerando a alíquota vigente na data de referência.
      required:
        - amount
        - currency
      properties:
        amount:
          type: string
          format: double
          description: Valor relacionado ao objeto.
          pattern: '^\d{1,15}\.\d{2,4}$'
          maxLength: 20
          example: '50.02'
        currency:
          type: string
          description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
          pattern: '^[A-Z]{3}$'
          maxLength: 3
          example: BRL
    FundsBalancesNetAmount:
      type: object
      description: Valor do investimento atualizado na data de referência, posterior a dedução de impostos (IOF e IR) e taxa de saída, caso a instituição considere este valor na composição do saldo líquido. Este valor considera o valor bloqueado (blockedAmount).
      required:
        - amount
        - currency
      properties:
        amount:
          type: string
          format: double
          description: Valor relacionado ao objeto.
          pattern: '^-?\d{1,15}\.\d{2,4}$'
          maxLength: 21
          example: '1000.04'
        currency:
          type: string
          description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
          pattern: '^[A-Z]{3}$'
          maxLength: 3
          example: BRL
    FundsBalancesQuotaGrossPriceValue:
      type: object
      description: Valor bruto da cota atualizado na data de referência.
      required:
        - amount
        - currency
      properties:
        amount:
          type: string
          format: double
          description: Valor relacionado ao objeto.
          pattern: '^-?\d{1,15}\.\d{2,8}$'
          maxLength: 25
          example: '1000.04'
        currency:
          type: string
          description: 'Moeda referente ao valor monetário, seguindo o modelo ISO-4217.'
          pattern: '^[A-Z]{3}$'
          maxLength: 3
          example: BRL
    EnumFundsTransactionsType:
      type: string
      description: |
        Tipo de movimentação (Entrada ou Saída).

        ENTRADA: APLICACAO, TRANSFERENCIA_COTAS,  OUTROS.

        SAIDA: RESGATE, COME_COTAS, TRANSFERENCIA_COTAS, AMORTIZACAO, OUTROS.
      enum:
        - ENTRADA
        - SAIDA
      example: ENTRADA
    EnumFundsTransactionsTransactionType:
      type: string
      description: |
        O campo deve classificar a transação de movimentação de investimento em um dos tipos descritos (amortização, transferência de cotas, aplicação, resgate ou come-cotas).  
        A opção OUTROS só deve ser utilizada para os casos em que de fato a transação compartilhada não possa ser classificada como um dos itens deste Enum, e nesse caso deve-se preencher informações adicionais.
      enum:
        - AMORTIZACAO
        - TRANSFERENCIA_COTAS
        - APLICACAO
        - RESGATE
        - COME_COTAS
        - OUTROS
      example: AMORTIZACAO
    EnumFundsTransactionsCurrentType:
      type: string
      description: |
        Tipo de movimentação (Entrada ou Saída).

        ENTRADA: APLICACAO, TRANSFERENCIA_COTAS,  OUTROS.

        SAIDA: RESGATE, COME_COTAS, TRANSFERENCIA_COTAS, AMORTIZACAO, OUTROS.
      enum:
        - ENTRADA
        - SAIDA
      example: ENTRADA
    EnumFundsTransactionsCurrentTransactionType:
      type: string
      description: |
        O campo deve classificar a transação de movimentação de investimento em um dos tipos descritos (amortização, transferência de cotas, aplicação, resgate ou come-cotas).  
        A opção OUTROS só deve ser utilizada para os casos em que de fato a transação compartilhada não possa ser classificada como um dos itens deste Enum, e nesse caso deve-se preencher informações adicionais.
      enum:
        - AMORTIZACAO
        - TRANSFERENCIA_COTAS
        - APLICACAO
        - RESGATE
        - COME_COTAS
        - OUTROS
      example: AMORTIZACAO
    ResponseErrorMetaSingle:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          minItems: 1
          maxItems: 13
          items:
            type: object
            required:
              - code
              - title
              - detail
            properties:
              code:
                description: Código de erro específico do endpoint
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 255
              title:
                description: Título legível por humanos deste erro específico
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 255
              detail:
                description: Descrição legível por humanos deste erro específico
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 2048
        meta:
          $ref: '#/components/schemas/MetaOnlyRequestDateTime'
    MetaOnlyRequestDateTime:
      type: object
      description: Meta informações referente à API requisitada.
      required:
        - requestDateTime
      properties:
        requestDateTime:
          description: 'Data e hora da consulta, conforme especificação RFC-3339, formato UTC.'
          type: string
          maxLength: 20
          format: date-time
          example: '2021-05-21T08:30:00Z'
    ResponseErrorWithAbleAdditionalProperties:
      type: object
      required:
        - errors
      properties:
        errors:
          type: array
          minItems: 1
          maxItems: 13
          items:
            type: object
            required:
              - code
              - title
              - detail
            properties:
              code:
                description: Código de erro específico do endpoint
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 255
              title:
                description: Título legível por humanos deste erro específico
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 255
              detail:
                description: Descrição legível por humanos deste erro específico
                type: string
                pattern: '[\w\W\s]*'
                maxLength: 2048
        meta:
          $ref: '#/components/schemas/MetaWithAbleAdditionalProperties'
    MetaWithAbleAdditionalProperties:
      type: object
      description: Meta informações referente à API requisitada.
      required:
        - totalRecords
        - totalPages
        - requestDateTime
      properties:
        totalRecords:
          type: integer
          format: int32
          description: Número total de registros no resultado
          example: 1
        totalPages:
          type: integer
          format: int32
          description: Número total de páginas no resultado
          example: 1
        requestDateTime:
          description: 'Data e hora da consulta, conforme especificação RFC-3339, formato UTC.'
          type: string
          maxLength: 20
          format: date-time
          example: '2021-05-21T08:30:00Z'
    LegacyId:
      description: |
        Array de chave e valor com a chave de identificação do recurso no sistema de origem (legado), permitindo chaves compostas
      type: array
      items:
        type: object
        required:
          - key
          - value
        properties:
          key:
            description: |
              Nome do campo do identificador no sistema de origem
            type: string
            example: internalResourceId
          value:
            description: |
              Valor do campo do identificador no sistema de origem
            type: string
            example: '1234'
        additionalProperties: false
      minItems: 1
      maxItems: 10
    ToTransactionConversionDate:
      description: |
        Data final de filtragem.
        [Restrição] Deve obrigatoriamente ser enviado caso o campo fromTransactionConversionDate seja informado.
        Caso não seja informado, deve ser assumido o dia atual.
      type: string
      maxLength: 10
      format: date
      example: '2021-05-21'
    FromTransactionConversionDate:
      description: |
        Data inicial de filtragem.
        [Restrição] Deve obrigatoriamente ser enviado caso o campo toTransactionConversionDate seja informado.
        Caso não seja informado, deve ser assumido o dia atual.
      type: string
      maxLength: 10
      format: date
      example: '2021-05-21'
    ToTransactionConversionDateCurrent:
      description: |
        Data final de filtragem.
        O período máximo utilizado no filtro é de 7 dias inclusive (D-6).
        [Restrição] Deve obrigatoriamente ser enviado caso o campo fromTransactionConversionDate seja informado.
        Caso não seja informado, deve ser assumido o dia atual.
      type: string
      maxLength: 10
      format: date
      example: '2021-05-21'
    FromTransactionConversionDateCurrent:
      description: |
        Data inicial de filtragem.
        O período máximo utilizado no filtro é de 7 dias inclusive (D-6).
        [Restrição] Deve obrigatoriamente ser enviado caso o campo toTransactionConversionDate seja informado.
        Caso não seja informado, deve ser assumido o dia atual.
      type: string
      maxLength: 10
      format: date
      example: '2021-05-21'
    PaginationKey:
      description: |
        Identificador de rechamada, utilizado para evitar a contagem de chamadas ao endpoint durante a paginação.
        Esse campo pode ser repassado de um fluxo anterior como um valor residual e, embora possa estar presente na requisição, não é necessário utilizá-lo — ele pode simplesmente ser ignorado.
      type: string
      maxLength: 2048
      pattern: '[\w\W\s]*'
    Page:
      description: |
        Número da página que está sendo requisitada (o valor da primeira página é 1).
      type: integer
      default: 1
      minimum: 1
      maximum: 2147483647
      format: int32
    PageSize:
      description: |
        Quantidade total de registros por páginas.
      type: integer
      default: 25
      minimum: 1
      format: int32
      maximum: 1000
    ConsentDataSharing:
      description: |
        Consentimento de compartilhamento de dados
      type: object
      required:
        - brandId
        - creationDateTime
        - tpp
        - externalId
        - loggedUser
        - permissions
      properties:
        authExtraData:
          type: array
          description: |
            Array de chave e valor com dados adicionais vindos do autorizador.
            Esses dados podem ser utilizados como filtros de recursos.
          items:
            type: object
            required:
              - key
              - value
            properties:
              key:
                type: string
                example: agencia
              value:
                type: string
                example: '0011'
        consentOwner:
          deprecated: true
          type: array
          description: |
            [Obsoleto] Array de chave e valor com os dados de identificação referente ao dono do consentimento.
          items:
            type: object
            required:
              - key
              - value
            properties:
              key:
                type: string
                example: agencia
              value:
                type: string
                example: '0011'
        brandId:
          type: string
          description: |
            Identificador da marca reportada pelo participante do Open Finance
          example: cbanco
          minLength: 1
          maxLength: 50
        creationDateTime:
          description: |
            Data e hora em que o consentimento foi criado.
            Uma string com data e hora conforme especificação RFC-3339, sempre com a utilização de timezone UTC (UTC time format).
          type: string
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$ '
          example: '2021-05-21T08:30:00Z'
          maxLength: 20
        tpp:
          type: object
          description: |
            Detalhes do TPP (Third Party Provider) que solicitou o consentimento
          additionalProperties: false
          required:
            - name
          properties:
            name:
              type: string
              description: |
                Nome do TPP que solicitou o consentimento
              example: GuiaBolsa
              maxLength: 100
        externalId:
          type: string
          description: |
            Identificador do consentimento utilizado fora da plataforma Opus Open Finance
          example: urn:oob-bank:2f710909-4ccd-4998-8679-3d8de00e5ccf
          maxLength: 100
        loggedUser:
          type: object
          description: |
            Usuário (pessoa natural) que encontra-se logado na instituição Transmissora de Dados.
          additionalProperties: false
          required:
            - document
          properties:
            document:
              type: object
              description: |
                Documento de identificação oficial do usuário.
              additionalProperties: false
              required:
                - identification
                - rel
              properties:
                identification:
                  type: string
                  maxLength: 11
                  description: |
                    Número do documento de identificação oficial do usuário.
                  example: '11111111111'
                  pattern: ^\d{11}$
                rel:
                  type: string
                  maxLength: 3
                  description: |
                    Tipo do documento de identificação oficial do usuário.
                  example: CPF
                  pattern: ^[A-Z]{3}$
        businessDocumentType:
          type: object
          description: |
            Usuário (pessoa jurídica) que encontra-se logado na instituição Transmissora de Dados.
            [Restrição] Preenchimento obrigatório se usuário logado na instituição Transmissora de Dados for um CNPJ (pessoa jurídica).
          additionalProperties: false
          required:
            - document
          properties:
            document:
              type: object
              description: |
                Documento de identificação oficial do titular pessoa jurídica.
              additionalProperties: false
              required:
                - identification
                - rel
              properties:
                identification:
                  type: string
                  maxLength: 14
                  description: |
                    Número do documento de identificação oficial do titular pessoa jurídica.
                  example: '11111111111111'
                  pattern: ^\d{14}$
                rel:
                  type: string
                  maxLength: 4
                  description: |
                    Tipo do documento de identificação oficial do titular pessoa jurídica.
                  example: CNPJ
                  pattern: ^[A-Z]{4}$
        resources:
          description: |
            Lista de recursos permitidos pelo cliente
          type: array
          items:
            type: object
            description: |
              Recursos selecionados pelo cliente
            required:
              - type
              - resourceLegacyId
            properties:
              type:
                description: |
                  Tipo do recurso
                type: string
                enum:
                  - ACCOUNT
                  - CREDIT_CARD_ACCOUNT
                  - LOAN
                  - FINANCING
                  - UNARRANGED_ACCOUNT_OVERDRAFT
                  - INVOICE_FINANCING
                  - PAYMENT
                  - BANK_FIXED_INCOME
                  - CREDIT_FIXED_INCOME
                  - VARIABLE_INCOME
                  - TREASURE_TITLE
                  - FUND
                example: PAYMENT
              resourceLegacyId:
                $ref: '#/components/schemas/LegacyId'
              authorizers:
                deprecated: true
                description: |
                  [Obsoleto] Lista dos autorizadores para o recurso para casos de múltipla alçada.
                  Caso o recurso seja selecionado, todos os autorizadores deverão aceitar o consentimento que o recurso faz parte
                type: array
                items:
                  type: object
                  required:
                    - cpf
                    - name
                  properties:
                    cpf:
                      description: |
                        CPF do autorizador
                      type: string
                      minLength: 11
                      maxLength: 11
                      pattern: ^\d{11}$
                      example: '11111111111'
                    name:
                      description: |
                        Nome do autorizador
                      type: string
                      example: Marco Antonio de Brito
                minItems: 1
              hasMultipleAuthorisers:
                deprecated: true
                type: boolean
                example: 'false'
            additionalProperties: false
          maxItems: 1000
        expirationDateTime:
          description: |
            Data e hora de expiração da permissão.
            De preenchimento obrigatório, reflete a data limite de validade do consentimento.
            Uma string com data e hora conforme especificação RFC-3339, sempre com a utilização de timezone UTC (UTC time format).
          type: string
          maxLength: 20
          pattern: '^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])T(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)Z$ '
          example: '2021-05-21T08:30:00Z'
        permissions:
          type: array
          items:
            description: |
              Somente para consentimentos de compartilhamento de dados.
              Especifica os tipos de permissões de acesso às APIs no escopo do Open Finance Brasil - Fase 2, de acordo com os blocos de consentimento fornecidos pelo usuário e necessários ao acesso a cada endpoint das APIs.
            type: string
            enum:
              - ACCOUNTS_READ
              - ACCOUNTS_BALANCES_READ
              - ACCOUNTS_TRANSACTIONS_READ
              - ACCOUNTS_OVERDRAFT_LIMITS_READ
              - CREDIT_CARDS_ACCOUNTS_READ
              - CREDIT_CARDS_ACCOUNTS_BILLS_READ
              - CREDIT_CARDS_ACCOUNTS_BILLS_TRANSACTIONS_READ
              - CREDIT_CARDS_ACCOUNTS_LIMITS_READ
              - CREDIT_CARDS_ACCOUNTS_TRANSACTIONS_READ
              - CUSTOMERS_PERSONAL_IDENTIFICATIONS_READ
              - CUSTOMERS_PERSONAL_ADITTIONALINFO_READ
              - CUSTOMERS_BUSINESS_IDENTIFICATIONS_READ
              - CUSTOMERS_BUSINESS_ADITTIONALINFO_READ
              - FINANCINGS_READ
              - FINANCINGS_SCHEDULED_INSTALMENTS_READ
              - FINANCINGS_PAYMENTS_READ
              - FINANCINGS_WARRANTIES_READ
              - INVOICE_FINANCINGS_READ
              - INVOICE_FINANCINGS_SCHEDULED_INSTALMENTS_READ
              - INVOICE_FINANCINGS_PAYMENTS_READ
              - INVOICE_FINANCINGS_WARRANTIES_READ
              - LOANS_READ
              - LOANS_SCHEDULED_INSTALMENTS_READ
              - LOANS_PAYMENTS_READ
              - LOANS_WARRANTIES_READ
              - UNARRANGED_ACCOUNTS_OVERDRAFT_READ
              - UNARRANGED_ACCOUNTS_OVERDRAFT_SCHEDULED_INSTALMENTS_READ
              - UNARRANGED_ACCOUNTS_OVERDRAFT_PAYMENTS_READ
              - UNARRANGED_ACCOUNTS_OVERDRAFT_WARRANTIES_READ
              - BANK_FIXED_INCOMES_READ
              - CREDIT_FIXED_INCOMES_READ
              - FUNDS_READ
              - VARIABLE_INCOMES_READ
              - TREASURE_TITLES_READ
              - EXCHANGES_READ
              - RESOURCES_READ
          minItems: 1
          maxItems: 30
          example:
            - ACCOUNTS_READ
            - ACCOUNTS_OVERDRAFT_LIMITS_READ
            - RESOURCES_READ
      additionalProperties: false
    RequestMeta:
      type: object
      description: |
        Objeto que contém dados referentes ao contexto no qual o request for recebido.
      required:
        - correlationId
        - brandId
      properties:
        correlationId:
          type: string
          description: |
            UUID que identifica o correlation ID da requisição realizada.
            Deve ser propagado para todas as chamadas feitas entre sistemas e logado sempre que possível para facilitar o trace de erros
          pattern: ^(localID:)?[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$
          example: localID:97623ed1-4732-4bf2-8d4b-ae7aced5443b
        brandId:
          type: string
          description: |
            Identificador da marca reportada pelo participante do Open Finance
          example: cbanco
          minLength: 1
          maxLength: 50
      additionalProperties: false
    RequestWithConsentAndRequestMeta:
      type: object
      required:
        - consent
        - requestMeta
      properties:
        consent:
          $ref: '#/components/schemas/ConsentDataSharing'
        requestMeta:
          $ref: '#/components/schemas/RequestMeta'
    RequestWithConsentAndRequestMetaAndPagination:
      type: object
      required:
        - consent
        - requestMeta
      properties:
        consent:
          $ref: '#/components/schemas/ConsentDataSharing'
        requestMeta:
          $ref: '#/components/schemas/RequestMeta'
        page:
          $ref: '#/components/schemas/Page'
        pageSize:
          $ref: '#/components/schemas/PageSize'
        pagination-key:
          $ref: '#/components/schemas/PaginationKey'
    MetaOnlyRequestDateTimeAndHasMoreRecords:
      type: object
      description: |
        Meta informações referente à API requisitada.
      required:
        - requestDateTime
        - hasMoreRecords
      properties:
        requestDateTime:
          description: |
            Data e hora da consulta, conforme especificação RFC-3339, formato UTC.
          type: string
          maxLength: 20
          format: date-time
          example: '2021-05-21T08:30:00Z'
        hasMoreRecords:
          type: boolean
          description: |
            Indica se tem mais registros a serem retornados (true) ou não (false).
          example: true
    NonSelectableResourceDiscoveryResponse:
      title: Non-Selectable Resource Discovery Response
      type: object
      required:
        - data
      properties:
        data:
          type: object
          description: |
            Objeto contendo a lista de recursos do cliente.
          required:
            - resources
          properties:
            resources:
              description: |
                Lista de recursos relacionados ao discovery
              type: array
              items:
                type: object
                properties:
                  resourceLegacyId:
                    description: |
                      Array de chave e valor com a chave de identificação do recurso no sistema de origem (legado), permitindo chaves compostas
                    type: array
                    items:
                      type: object
                      properties:
                        key:
                          description: |
                            Nome do campo do identificador no sistema de origem
                          type: string
                        value:
                          description: |
                            Valor do campo do identificador no sistema de origem
                          type: string
                      required:
                        - key
                  validUntil:
                    description: |
                      Indica a data até a qual o recurso estará disponível.
                    type: string
                    format: date
                    example: '2025-05-21'
                  status:
                    description: |
                      Indica o status atual do recurso
                    type: string
                    default: AVAILABLE
                    enum:
                      - AVAILABLE
                      - PENDING_AUTHORISATION
                      - UNAVAILABLE
                      - TEMPORARILY_UNAVAILABLE
                  authorizers:
                    description: |
                      Lista dos autorizadores para o recurso para casos de multipla alçada.
                      Caso o recurso seja selecionado, todos os autorizadores deverão aceitar o consentimento que o recurso faz parte
                    type: array
                    items:
                      type: object
                      properties:
                        cpf:
                          description: |
                            CPF do autorizador
                          type: string
                          minLength: 11
                          maxLength: 11
                          pattern: ^\d{11}$
                        name:
                          description: |
                            Nome do autorizador
                          type: string
                      required:
                        - cpf
                        - name
                    minItems: 1
                required:
                  - resourceLegacyId
                  - validUntil
    RequestWithConsentAndRequestMetaAndInvestmentId:
      type: object
      required:
        - consent
        - requestMeta
        - investmentId
      properties:
        consent:
          $ref: '#/components/schemas/ConsentDataSharing'
        requestMeta:
          $ref: '#/components/schemas/RequestMeta'
        investmentId:
          $ref: '#/components/schemas/LegacyId'
    RequestTransactions:
      type: object
      required:
        - consent
        - requestMeta
        - investmentId
      properties:
        consent:
          $ref: '#/components/schemas/ConsentDataSharing'
        requestMeta:
          $ref: '#/components/schemas/RequestMeta'
        investmentId:
          $ref: '#/components/schemas/LegacyId'
        page:
          $ref: '#/components/schemas/Page'
        pageSize:
          $ref: '#/components/schemas/PageSize'
        fromTransactionConversionDate:
          $ref: '#/components/schemas/FromTransactionConversionDate'
        toTransactionConversionDate:
          $ref: '#/components/schemas/ToTransactionConversionDate'
        pagination-key:
          $ref: '#/components/schemas/PaginationKey'
    RequestTransactionsCurrent:
      type: object
      required:
        - consent
        - requestMeta
        - investmentId
      properties:
        consent:
          $ref: '#/components/schemas/ConsentDataSharing'
        requestMeta:
          $ref: '#/components/schemas/RequestMeta'
        investmentId:
          $ref: '#/components/schemas/LegacyId'
        page:
          $ref: '#/components/schemas/Page'
        pageSize:
          $ref: '#/components/schemas/PageSize'
        fromTransactionConversionDate:
          $ref: '#/components/schemas/FromTransactionConversionDateCurrent'
        toTransactionConversionDate:
          $ref: '#/components/schemas/ToTransactionConversionDateCurrent'
        pagination-key:
          $ref: '#/components/schemas/PaginationKey'
  responses:
    OkResponseFundsProductList:
      description: Dados obtidos com sucesso
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ResponseFundsProductList'
    OkResponseFundsProductIdentification:
      description: Dados de fundos de investimentos obtidos com sucesso.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ResponseFundsProductIdentification'
    ResponseFundsBalances:
      description: Dados obtidos com sucesso
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ResponseFundsBalances'
    OKResponseFundsTransactions:
      description: Dados obtidos com sucesso.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ResponseFundsTransactions'
    OKResponseFundsTransactionsCurrent:
      description: Dados obtidos com sucesso.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ResponseFundsTransactionsCurrent'
    BadRequest:
      description: 'A requisição foi malformada, omitindo atributos obrigatórios, seja no payload ou através de atributos na URL.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    Forbidden:
      description: O token tem escopo incorreto ou uma política de segurança foi violada
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    GatewayTimeout:
      description: GATEWAY TIMEOUT - A requisição não foi atendida dentro do tempo limite estabelecido
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    InternalServerError:
      description: Ocorreu um erro no gateway da API ou no microsserviço
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    Locked:
      description: Locked
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    MethodNotAllowed:
      description: O consumidor tentou acessar o recurso com um método não suportado
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    NotAcceptable:
      description: A solicitação continha um cabeçalho Accept diferente dos tipos de mídia permitidos ou um conjunto de caracteres diferente de UTF-8
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    NotFound:
      description: O recurso solicitado não existe ou não foi implementado
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    TooManyRequests:
      description: 'A operação foi recusada, pois muitas solicitações foram feitas dentro de um determinado período ou o limite global de requisições concorrentes foi atingido'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    Unauthorized:
      description: Cabeçalho de autenticação ausente/inválido ou token inválido
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    UnprocessableEntity:
      description: 'A sintaxe da requisição esta correta, mas não foi possível processar as instruções presentes.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    Default:
      description: Erro inesperado.
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    SiteIsOverloaded:
      description: 'O site está sobrecarregado e a operação foi recusada, pois foi atingido o limite máximo de TPS global, neste momento.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorMetaSingle'
    BadRequestWithAdditionalProperties:
      description: 'A requisição foi malformada, omitindo atributos obrigatórios, seja no payload ou através de atributos na URL.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    ForbiddenWithAdditionalProperties:
      description: O token tem escopo incorreto ou uma política de segurança foi violada
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    GatewayTimeoutWithAdditionalProperties:
      description: GATEWAY TIMEOUT - A requisição não foi atendida dentro do tempo limite estabelecido
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    InternalServerErrorWithAdditionalProperties:
      description: Ocorreu um erro no gateway da API ou no microsserviço
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    LockedWithAdditionalProperties:
      description: Locked
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    MethodNotAllowedWithAdditionalProperties:
      description: O consumidor tentou acessar o recurso com um método não suportado
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    NotAcceptableWithAdditionalProperties:
      description: A solicitação continha um cabeçalho Accept diferente dos tipos de mídia permitidos ou um conjunto de caracteres diferente de UTF-8
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    NotFoundWithAdditionalProperties:
      description: O recurso solicitado não existe ou não foi implementado
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    TooManyRequestsWithAdditionalProperties:
      description: 'A operação foi recusada, pois muitas solicitações foram feitas dentro de um determinado período ou o limite global de requisições concorrentes foi atingido'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    UnauthorizedWithAdditionalProperties:
      description: Cabeçalho de autenticação ausente/inválido ou token inválido
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    UnprocessableEntityWithAdditionalProperties:
      description: 'A sintaxe da requisição esta correta, mas não foi possível processar as instruções presentes.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    DefaultWithAdditionalProperties:
      description: Erro inesperado.
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    SiteIsOverloadedWithAdditionalProperties:
      description: 'O site está sobrecarregado e a operação foi recusada, pois foi atingido o limite máximo de TPS global, neste momento.'
      content:
        application/json; charset=utf-8:
          schema:
            $ref: '#/components/schemas/ResponseErrorWithAbleAdditionalProperties'
    OKResponseFundDiscovery:
      description: Lista de recursos representando os investimentos do tipo Fundos de Investimento realizados pelo cliente obtidos com sucesso.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NonSelectableResourceDiscoveryResponse'
